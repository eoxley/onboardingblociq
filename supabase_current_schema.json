{
  "actuals": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "budget_line_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "schedule_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "amount",
        "type": "numeric",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "date",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "description",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "invoice_number",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "vendor_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "agency_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "actuals_budget_line_id_fkey",
        "definition": "FOREIGN KEY (budget_line_id) REFERENCES budget_lines(id)"
      },
      {
        "name": "actuals_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id)"
      },
      {
        "name": "actuals_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "actuals_schedule_id_fkey",
        "definition": "FOREIGN KEY (schedule_id) REFERENCES schedules(id)"
      },
      {
        "name": "actuals_vendor_id_fkey",
        "definition": "FOREIGN KEY (vendor_id) REFERENCES vendors(id)"
      }
    ],
    "indexes": [
      {
        "name": "actuals_pkey",
        "definition": "CREATE UNIQUE INDEX actuals_pkey ON public.actuals USING btree (id)"
      },
      {
        "name": "idx_actuals_budget_line_id",
        "definition": "CREATE INDEX idx_actuals_budget_line_id ON public.actuals USING btree (budget_line_id)"
      },
      {
        "name": "idx_actuals_building_id",
        "definition": "CREATE INDEX idx_actuals_building_id ON public.actuals USING btree (building_id)"
      },
      {
        "name": "idx_actuals_schedule_id",
        "definition": "CREATE INDEX idx_actuals_schedule_id ON public.actuals USING btree (schedule_id)"
      }
    ]
  },
  "agencies": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "name",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "agencies_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "agencies_pkey",
        "definition": "CREATE UNIQUE INDEX agencies_pkey ON public.agencies USING btree (id)"
      }
    ]
  },
  "ai_conversations": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "title",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "user_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "rolling_summary",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "''::text"
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "ai_conversations_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id)"
      },
      {
        "name": "ai_conversations_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "ai_conversations_user_id_fkey",
        "definition": "FOREIGN KEY (user_id) REFERENCES auth.users(id)"
      }
    ],
    "indexes": [
      {
        "name": "ai_conversations_pkey",
        "definition": "CREATE UNIQUE INDEX ai_conversations_pkey ON public.ai_conversations USING btree (id)"
      },
      {
        "name": "idx_ai_conversations_user_id",
        "definition": "CREATE INDEX idx_ai_conversations_user_id ON public.ai_conversations USING btree (user_id)"
      },
      {
        "name": "idx_ai_conversations_building_id",
        "definition": "CREATE INDEX idx_ai_conversations_building_id ON public.ai_conversations USING btree (building_id)"
      },
      {
        "name": "idx_ai_conversations_created_at",
        "definition": "CREATE INDEX idx_ai_conversations_created_at ON public.ai_conversations USING btree (created_at DESC)"
      }
    ]
  },
  "ai_logs": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "user_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "question",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "response",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "context_type",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'general'::text"
      },
      {
        "name": "document_ids",
        "type": "ARRAY",
        "max_length": null,
        "nullable": true,
        "default": "'{}'::uuid[]"
      },
      {
        "name": "leaseholder_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "email_thread_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "metadata",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": "'{}'::jsonb"
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "ai_logs_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "ai_logs_user_id_fkey",
        "definition": "FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE SET NULL"
      }
    ],
    "indexes": [
      {
        "name": "ai_logs_pkey",
        "definition": "CREATE UNIQUE INDEX ai_logs_pkey ON public.ai_logs USING btree (id)"
      },
      {
        "name": "idx_ai_logs_user",
        "definition": "CREATE INDEX idx_ai_logs_user ON public.ai_logs USING btree (user_id)"
      },
      {
        "name": "idx_ai_logs_building",
        "definition": "CREATE INDEX idx_ai_logs_building ON public.ai_logs USING btree (building_id)"
      },
      {
        "name": "idx_ai_logs_context",
        "definition": "CREATE INDEX idx_ai_logs_context ON public.ai_logs USING btree (context_type)"
      },
      {
        "name": "idx_ai_logs_created",
        "definition": "CREATE INDEX idx_ai_logs_created ON public.ai_logs USING btree (created_at DESC)"
      },
      {
        "name": "idx_ai_logs_user_id",
        "definition": "CREATE INDEX idx_ai_logs_user_id ON public.ai_logs USING btree (user_id)"
      },
      {
        "name": "idx_ai_logs_building_id",
        "definition": "CREATE INDEX idx_ai_logs_building_id ON public.ai_logs USING btree (building_id)"
      },
      {
        "name": "idx_ai_logs_context_type",
        "definition": "CREATE INDEX idx_ai_logs_context_type ON public.ai_logs USING btree (context_type)"
      },
      {
        "name": "idx_ai_logs_created_at",
        "definition": "CREATE INDEX idx_ai_logs_created_at ON public.ai_logs USING btree (created_at DESC)"
      }
    ]
  },
  "ai_memory": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "scope",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "conversation_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "key",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "value",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "weight",
        "type": "integer",
        "max_length": null,
        "nullable": true,
        "default": "1"
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "ai_memory_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id)"
      },
      {
        "name": "ai_memory_conversation_id_fkey",
        "definition": "FOREIGN KEY (conversation_id) REFERENCES ai_conversations(id) ON DELETE CASCADE"
      },
      {
        "name": "ai_memory_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "ai_memory_scope_building_id_conversation_id_key_key",
        "definition": "UNIQUE (scope, building_id, conversation_id, key)"
      },
      {
        "name": "ai_memory_scope_check",
        "definition": "CHECK ((scope = ANY (ARRAY['global'::text, 'building'::text, 'conversation'::text])))"
      }
    ],
    "indexes": [
      {
        "name": "ai_memory_pkey",
        "definition": "CREATE UNIQUE INDEX ai_memory_pkey ON public.ai_memory USING btree (id)"
      },
      {
        "name": "ai_memory_scope_building_id_conversation_id_key_key",
        "definition": "CREATE UNIQUE INDEX ai_memory_scope_building_id_conversation_id_key_key ON public.ai_memory USING btree (scope, building_id, conversation_id, key)"
      },
      {
        "name": "idx_ai_memory_scope",
        "definition": "CREATE INDEX idx_ai_memory_scope ON public.ai_memory USING btree (scope, building_id, conversation_id, key)"
      }
    ]
  },
  "ai_messages": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "conversation_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "role",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "content",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "metadata",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": "'{}'::jsonb"
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "ai_messages_conversation_id_fkey",
        "definition": "FOREIGN KEY (conversation_id) REFERENCES ai_conversations(id) ON DELETE CASCADE"
      },
      {
        "name": "ai_messages_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "ai_messages_role_check",
        "definition": "CHECK ((role = ANY (ARRAY['system'::text, 'user'::text, 'assistant'::text])))"
      }
    ],
    "indexes": [
      {
        "name": "ai_messages_pkey",
        "definition": "CREATE UNIQUE INDEX ai_messages_pkey ON public.ai_messages USING btree (id)"
      },
      {
        "name": "idx_ai_messages_conv_id",
        "definition": "CREATE INDEX idx_ai_messages_conv_id ON public.ai_messages USING btree (conversation_id, created_at)"
      }
    ]
  },
  "apportionments": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "unit_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "budget_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "percentage",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "amount",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "confidence_score",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": "1.00"
      }
    ],
    "constraints": [
      {
        "name": "apportionments_budget_id_fkey",
        "definition": "FOREIGN KEY (budget_id) REFERENCES budgets(id) ON DELETE CASCADE"
      },
      {
        "name": "apportionments_confidence_score_check",
        "definition": "CHECK (((confidence_score >= (0)::numeric) AND (confidence_score <= (1)::numeric)))"
      },
      {
        "name": "apportionments_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "apportionments_unit_id_fkey",
        "definition": "FOREIGN KEY (unit_id) REFERENCES units(id) ON DELETE CASCADE"
      },
      {
        "name": "fk_apportionments_building",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id)"
      }
    ],
    "indexes": [
      {
        "name": "apportionments_pkey",
        "definition": "CREATE UNIQUE INDEX apportionments_pkey ON public.apportionments USING btree (id)"
      },
      {
        "name": "idx_apportionments_building_id",
        "definition": "CREATE INDEX idx_apportionments_building_id ON public.apportionments USING btree (building_id)"
      },
      {
        "name": "idx_apportionments_building",
        "definition": "CREATE INDEX idx_apportionments_building ON public.apportionments USING btree (building_id)"
      },
      {
        "name": "idx_apportionments_unit",
        "definition": "CREATE INDEX idx_apportionments_unit ON public.apportionments USING btree (unit_id)"
      }
    ]
  },
  "arrears_records": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "unit_id",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "tenant_name",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "amount_owed",
        "type": "numeric",
        "max_length": null,
        "nullable": false,
        "default": "0"
      },
      {
        "name": "days_overdue",
        "type": "integer",
        "max_length": null,
        "nullable": false,
        "default": "0"
      },
      {
        "name": "last_payment_date",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": "'current'::text"
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "arrears_records_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "arrears_records_status_check",
        "definition": "CHECK ((status = ANY (ARRAY['current'::text, 'overdue'::text, 'critical'::text])))"
      }
    ],
    "indexes": [
      {
        "name": "arrears_records_pkey",
        "definition": "CREATE UNIQUE INDEX arrears_records_pkey ON public.arrears_records USING btree (id)"
      },
      {
        "name": "idx_arrears_building_id",
        "definition": "CREATE INDEX idx_arrears_building_id ON public.arrears_records USING btree (building_id)"
      },
      {
        "name": "idx_arrears_status",
        "definition": "CREATE INDEX idx_arrears_status ON public.arrears_records USING btree (status)"
      }
    ]
  },
  "assets": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "asset_type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "asset_name",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "location_description",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "model_number",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "serial_number",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "manufacturer",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "installation_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "last_service_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "next_service_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "warranty_expiry",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "compliance_category",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'active'::text"
      },
      {
        "name": "linked_documents",
        "type": "ARRAY",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "assets_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "assets_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "assets_pkey",
        "definition": "CREATE UNIQUE INDEX assets_pkey ON public.assets USING btree (id)"
      },
      {
        "name": "idx_assets_building",
        "definition": "CREATE INDEX idx_assets_building ON public.assets USING btree (building_id)"
      },
      {
        "name": "idx_assets_type",
        "definition": "CREATE INDEX idx_assets_type ON public.assets USING btree (asset_type)"
      },
      {
        "name": "idx_assets_compliance",
        "definition": "CREATE INDEX idx_assets_compliance ON public.assets USING btree (compliance_category)"
      },
      {
        "name": "idx_assets_status",
        "definition": "CREATE INDEX idx_assets_status ON public.assets USING btree (status)"
      }
    ]
  },
  "audit_trail": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "timestamp",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "building_id",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "intent",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": "'success'::text"
      },
      {
        "name": "user_id",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "payload",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "response",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "files_generated",
        "type": "ARRAY",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "error_message",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "audit_trail_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "audit_trail_status_check",
        "definition": "CHECK ((status = ANY (ARRAY['success'::text, 'fail'::text, 'warn'::text, 'todo'::text])))"
      }
    ],
    "indexes": [
      {
        "name": "audit_trail_pkey",
        "definition": "CREATE UNIQUE INDEX audit_trail_pkey ON public.audit_trail USING btree (id)"
      },
      {
        "name": "idx_audit_trail_building_id",
        "definition": "CREATE INDEX idx_audit_trail_building_id ON public.audit_trail USING btree (building_id)"
      },
      {
        "name": "idx_audit_trail_timestamp",
        "definition": "CREATE INDEX idx_audit_trail_timestamp ON public.audit_trail USING btree (\"timestamp\" DESC)"
      },
      {
        "name": "idx_audit_trail_status",
        "definition": "CREATE INDEX idx_audit_trail_status ON public.audit_trail USING btree (status)"
      }
    ]
  },
  "balances_daily": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "as_of_date",
        "type": "date",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "balance",
        "type": "numeric",
        "max_length": null,
        "nullable": false,
        "default": "0"
      },
      {
        "name": "arrears_total",
        "type": "numeric",
        "max_length": null,
        "nullable": false,
        "default": "0"
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "balances_daily_building_id_as_of_date_key",
        "definition": "UNIQUE (building_id, as_of_date)"
      },
      {
        "name": "balances_daily_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "balances_daily_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "balances_daily_pkey",
        "definition": "CREATE UNIQUE INDEX balances_daily_pkey ON public.balances_daily USING btree (id)"
      },
      {
        "name": "balances_daily_building_id_as_of_date_key",
        "definition": "CREATE UNIQUE INDEX balances_daily_building_id_as_of_date_key ON public.balances_daily USING btree (building_id, as_of_date)"
      },
      {
        "name": "idx_balances_daily_building_date",
        "definition": "CREATE INDEX idx_balances_daily_building_date ON public.balances_daily USING btree (building_id, as_of_date DESC)"
      }
    ]
  },
  "bsr_compliance_tracking": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "bsr_registration_number",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "accountable_person",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "principal_accountable_person",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "is_higher_risk",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "false"
      },
      {
        "name": "height_metres",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "number_of_storeys",
        "type": "integer",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "number_of_residential_units",
        "type": "integer",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "overall_compliance_status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "last_assessment_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "next_assessment_due",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "safety_case_report_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "safety_case_status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "safety_case_last_updated",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "structure_compliant",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "false"
      },
      {
        "name": "fire_safety_compliant",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "false"
      },
      {
        "name": "mechanical_electrical_compliant",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "false"
      },
      {
        "name": "resident_engagement_compliant",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "false"
      },
      {
        "name": "metadata",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": "'{}'::jsonb"
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "bsr_compliance_tracking_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "bsr_compliance_tracking_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "bsr_compliance_tracking_pkey",
        "definition": "CREATE UNIQUE INDEX bsr_compliance_tracking_pkey ON public.bsr_compliance_tracking USING btree (id)"
      },
      {
        "name": "idx_bsr_tracking_building",
        "definition": "CREATE INDEX idx_bsr_tracking_building ON public.bsr_compliance_tracking USING btree (building_id)"
      },
      {
        "name": "idx_bsr_tracking_higher_risk",
        "definition": "CREATE INDEX idx_bsr_tracking_higher_risk ON public.bsr_compliance_tracking USING btree (is_higher_risk) WHERE (is_higher_risk = true)"
      }
    ]
  },
  "bsr_helpers": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "helper_type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "category",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "title",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "description",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "severity",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'info'::text"
      },
      {
        "name": "action_label",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "action_type",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "action_payload",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "context_data",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": "'{}'::jsonb"
      },
      {
        "name": "is_active",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "true"
      },
      {
        "name": "dismissed_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "dismissed_by",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "generated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "expires_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "bsr_helpers_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "bsr_helpers_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "bsr_helpers_severity_check",
        "definition": "CHECK ((severity = ANY (ARRAY['critical'::text, 'high'::text, 'medium'::text, 'low'::text, 'info'::text])))"
      }
    ],
    "indexes": [
      {
        "name": "bsr_helpers_pkey",
        "definition": "CREATE UNIQUE INDEX bsr_helpers_pkey ON public.bsr_helpers USING btree (id)"
      },
      {
        "name": "idx_bsr_helpers_building",
        "definition": "CREATE INDEX idx_bsr_helpers_building ON public.bsr_helpers USING btree (building_id, is_active)"
      },
      {
        "name": "idx_bsr_helpers_type",
        "definition": "CREATE INDEX idx_bsr_helpers_type ON public.bsr_helpers USING btree (helper_type, severity)"
      },
      {
        "name": "idx_bsr_helpers_active",
        "definition": "CREATE INDEX idx_bsr_helpers_active ON public.bsr_helpers USING btree (is_active, expires_at)"
      }
    ]
  },
  "budget_items": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "category",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "budgeted_amount",
        "type": "numeric",
        "max_length": null,
        "nullable": false,
        "default": "0"
      },
      {
        "name": "actual_amount",
        "type": "numeric",
        "max_length": null,
        "nullable": false,
        "default": "0"
      },
      {
        "name": "variance",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "period",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "budget_items_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "budget_items_pkey",
        "definition": "CREATE UNIQUE INDEX budget_items_pkey ON public.budget_items USING btree (id)"
      },
      {
        "name": "idx_budget_items_building_id",
        "definition": "CREATE INDEX idx_budget_items_building_id ON public.budget_items USING btree (building_id)"
      },
      {
        "name": "idx_budget_items_period",
        "definition": "CREATE INDEX idx_budget_items_period ON public.budget_items USING btree (period)"
      }
    ]
  },
  "budget_lines": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "budget_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "schedule_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "coa_code",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "description",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "annual_amount",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": "0"
      },
      {
        "name": "vat_rate",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": "0.2"
      },
      {
        "name": "vendor_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "agency_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "budget_lines_budget_id_fkey",
        "definition": "FOREIGN KEY (budget_id) REFERENCES budgets(id) ON DELETE CASCADE"
      },
      {
        "name": "budget_lines_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id)"
      },
      {
        "name": "budget_lines_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "budget_lines_schedule_id_fkey",
        "definition": "FOREIGN KEY (schedule_id) REFERENCES schedules(id)"
      },
      {
        "name": "budget_lines_vendor_id_fkey",
        "definition": "FOREIGN KEY (vendor_id) REFERENCES vendors(id)"
      }
    ],
    "indexes": [
      {
        "name": "budget_lines_pkey",
        "definition": "CREATE UNIQUE INDEX budget_lines_pkey ON public.budget_lines USING btree (id)"
      },
      {
        "name": "idx_budget_lines_budget_id",
        "definition": "CREATE INDEX idx_budget_lines_budget_id ON public.budget_lines USING btree (budget_id)"
      },
      {
        "name": "idx_budget_lines_building_id",
        "definition": "CREATE INDEX idx_budget_lines_building_id ON public.budget_lines USING btree (building_id)"
      },
      {
        "name": "idx_budget_lines_schedule_id",
        "definition": "CREATE INDEX idx_budget_lines_schedule_id ON public.budget_lines USING btree (schedule_id)"
      },
      {
        "name": "idx_budget_lines_budget_schedule",
        "definition": "CREATE INDEX idx_budget_lines_budget_schedule ON public.budget_lines USING btree (budget_id, schedule_id)"
      }
    ]
  },
  "budgets": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "period",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "total_amount",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "start_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "end_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "demand_date_1",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "demand_date_2",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "year_end_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "budget_type",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "agency_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "schedule_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "year",
        "type": "integer",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "name",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "confidence_score",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": "1.00"
      },
      {
        "name": "year_start",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "year_end",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "budgets_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "budgets_confidence_score_check",
        "definition": "CHECK (((confidence_score >= (0)::numeric) AND (confidence_score <= (1)::numeric)))"
      },
      {
        "name": "budgets_document_id_fkey",
        "definition": "FOREIGN KEY (document_id) REFERENCES building_documents(id) ON DELETE CASCADE"
      },
      {
        "name": "budgets_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "budgets_schedule_id_fkey",
        "definition": "FOREIGN KEY (schedule_id) REFERENCES schedules(id)"
      }
    ],
    "indexes": [
      {
        "name": "budgets_pkey",
        "definition": "CREATE UNIQUE INDEX budgets_pkey ON public.budgets USING btree (id)"
      },
      {
        "name": "idx_budgets_year",
        "definition": "CREATE INDEX idx_budgets_year ON public.budgets USING btree (year_start)"
      },
      {
        "name": "idx_budgets_schedule_id",
        "definition": "CREATE INDEX idx_budgets_schedule_id ON public.budgets USING btree (schedule_id)"
      },
      {
        "name": "idx_budgets_building_schedule",
        "definition": "CREATE INDEX idx_budgets_building_schedule ON public.budgets USING btree (building_id, schedule_id)"
      },
      {
        "name": "idx_budgets_building",
        "definition": "CREATE INDEX idx_budgets_building ON public.budgets USING btree (building_id)"
      }
    ]
  },
  "building_assignments": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "user_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "role",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'viewer'::text"
      },
      {
        "name": "assigned_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "assigned_by",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "building_assignments_assigned_by_fkey",
        "definition": "FOREIGN KEY (assigned_by) REFERENCES auth.users(id)"
      },
      {
        "name": "building_assignments_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "building_assignments_building_id_user_id_key",
        "definition": "UNIQUE (building_id, user_id)"
      },
      {
        "name": "building_assignments_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "building_assignments_user_id_fkey",
        "definition": "FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE CASCADE"
      }
    ],
    "indexes": [
      {
        "name": "building_assignments_pkey",
        "definition": "CREATE UNIQUE INDEX building_assignments_pkey ON public.building_assignments USING btree (id)"
      },
      {
        "name": "building_assignments_building_id_user_id_key",
        "definition": "CREATE UNIQUE INDEX building_assignments_building_id_user_id_key ON public.building_assignments USING btree (building_id, user_id)"
      },
      {
        "name": "idx_building_assignments_building",
        "definition": "CREATE INDEX idx_building_assignments_building ON public.building_assignments USING btree (building_id)"
      },
      {
        "name": "idx_building_assignments_user",
        "definition": "CREATE INDEX idx_building_assignments_user ON public.building_assignments USING btree (user_id)"
      }
    ]
  },
  "building_compliance_assets": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "compliance_asset_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "last_test_date",
        "type": "date",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "next_due_date",
        "type": "date",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "building_compliance_assets_building_id_compliance_asset_id__key",
        "definition": "UNIQUE (building_id, compliance_asset_id, last_test_date)"
      },
      {
        "name": "building_compliance_assets_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "building_compliance_assets_compliance_asset_id_fkey",
        "definition": "FOREIGN KEY (compliance_asset_id) REFERENCES compliance_assets(id) ON DELETE CASCADE"
      },
      {
        "name": "building_compliance_assets_document_id_fkey",
        "definition": "FOREIGN KEY (document_id) REFERENCES building_documents(id) ON DELETE CASCADE"
      },
      {
        "name": "building_compliance_assets_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "building_compliance_assets_status_check",
        "definition": "CHECK ((status = ANY (ARRAY['compliant'::text, 'overdue'::text, 'missing'::text])))"
      }
    ],
    "indexes": [
      {
        "name": "building_compliance_assets_pkey",
        "definition": "CREATE UNIQUE INDEX building_compliance_assets_pkey ON public.building_compliance_assets USING btree (id)"
      },
      {
        "name": "building_compliance_assets_building_id_compliance_asset_id__key",
        "definition": "CREATE UNIQUE INDEX building_compliance_assets_building_id_compliance_asset_id__key ON public.building_compliance_assets USING btree (building_id, compliance_asset_id, last_test_date)"
      }
    ]
  },
  "building_contractors": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "contractor_type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "company_name",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "contact_person",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "phone",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "email",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "contract_start",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "contract_end",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "retender_status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'not_scheduled'::text"
      },
      {
        "name": "retender_due_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "next_review_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "renewal_notice_period",
        "type": "interval",
        "max_length": null,
        "nullable": true,
        "default": "'90 days'::interval"
      },
      {
        "name": "confidence_score",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": "1.00"
      }
    ],
    "constraints": [
      {
        "name": "building_contractors_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "building_contractors_confidence_score_check",
        "definition": "CHECK (((confidence_score >= (0)::numeric) AND (confidence_score <= (1)::numeric)))"
      },
      {
        "name": "building_contractors_document_id_fkey",
        "definition": "FOREIGN KEY (document_id) REFERENCES building_documents(id)"
      },
      {
        "name": "building_contractors_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "building_contractors_pkey",
        "definition": "CREATE UNIQUE INDEX building_contractors_pkey ON public.building_contractors USING btree (id)"
      },
      {
        "name": "idx_building_contractors_building_id",
        "definition": "CREATE INDEX idx_building_contractors_building_id ON public.building_contractors USING btree (building_id)"
      },
      {
        "name": "idx_building_contractors_type",
        "definition": "CREATE INDEX idx_building_contractors_type ON public.building_contractors USING btree (contractor_type)"
      },
      {
        "name": "idx_building_contractors_retender_due",
        "definition": "CREATE INDEX idx_building_contractors_retender_due ON public.building_contractors USING btree (retender_due_date)"
      },
      {
        "name": "idx_building_contractors_retender_status",
        "definition": "CREATE INDEX idx_building_contractors_retender_status ON public.building_contractors USING btree (retender_status)"
      },
      {
        "name": "idx_contractors_building",
        "definition": "CREATE INDEX idx_contractors_building ON public.building_contractors USING btree (building_id)"
      }
    ]
  },
  "building_diary_entries": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "entry_date",
        "type": "date",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "building_diary_entries_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "building_diary_entries_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "building_diary_entries_pkey",
        "definition": "CREATE UNIQUE INDEX building_diary_entries_pkey ON public.building_diary_entries USING btree (id)"
      }
    ]
  },
  "building_documents": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "category",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "file_name",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "storage_path",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "entity_type",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "linked_entity_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "uploaded_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "ai_confidence",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "building_documents_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "building_documents_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "building_documents_pkey",
        "definition": "CREATE UNIQUE INDEX building_documents_pkey ON public.building_documents USING btree (id)"
      }
    ]
  },
  "building_insurance": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "insurance_type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "broker_name",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "insurer_name",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "policy_number",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "renewal_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "coverage_amount",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "premium_amount",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "expiry_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "building_insurance_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "building_insurance_document_id_fkey",
        "definition": "FOREIGN KEY (document_id) REFERENCES building_documents(id)"
      },
      {
        "name": "building_insurance_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "idx_building_insurance_expiry",
        "definition": "CREATE INDEX idx_building_insurance_expiry ON public.building_insurance USING btree (expiry_date)"
      },
      {
        "name": "building_insurance_pkey",
        "definition": "CREATE UNIQUE INDEX building_insurance_pkey ON public.building_insurance USING btree (id)"
      },
      {
        "name": "idx_building_insurance_building_id",
        "definition": "CREATE INDEX idx_building_insurance_building_id ON public.building_insurance USING btree (building_id)"
      },
      {
        "name": "idx_building_insurance_type",
        "definition": "CREATE INDEX idx_building_insurance_type ON public.building_insurance USING btree (insurance_type)"
      },
      {
        "name": "idx_building_insurance_building",
        "definition": "CREATE INDEX idx_building_insurance_building ON public.building_insurance USING btree (building_id)"
      }
    ]
  },
  "building_keys_access": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "access_type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "description",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "code",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "location",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "category",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "label",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "visibility",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'team'::text"
      }
    ],
    "constraints": [
      {
        "name": "building_keys_access_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "building_keys_access_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "building_keys_access_pkey",
        "definition": "CREATE UNIQUE INDEX building_keys_access_pkey ON public.building_keys_access USING btree (id)"
      },
      {
        "name": "idx_building_keys_access_building_id",
        "definition": "CREATE INDEX idx_building_keys_access_building_id ON public.building_keys_access USING btree (building_id)"
      },
      {
        "name": "idx_building_keys_access_type",
        "definition": "CREATE INDEX idx_building_keys_access_type ON public.building_keys_access USING btree (access_type)"
      },
      {
        "name": "idx_building_keys_access_category",
        "definition": "CREATE INDEX idx_building_keys_access_category ON public.building_keys_access USING btree (building_id, category)"
      },
      {
        "name": "idx_building_keys_access_search",
        "definition": "CREATE INDEX idx_building_keys_access_search ON public.building_keys_access USING gin (to_tsvector('english'::regconfig, ((((COALESCE(label, ''::text) || ' '::text) || COALESCE(description, ''::text)) || ' '::text) || COALESCE(location, ''::text))))"
      }
    ]
  },
  "building_knowledge": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "question",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "answer",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "category",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "source_type",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'user_input'::text"
      },
      {
        "name": "confidence",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": "1.00"
      },
      {
        "name": "metadata",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": "'{}'::jsonb"
      },
      {
        "name": "related_document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "keywords",
        "type": "ARRAY",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "verified",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "false"
      },
      {
        "name": "verified_by",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "verified_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_by",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "building_knowledge_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "building_knowledge_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "building_knowledge_related_document_id_fkey",
        "definition": "FOREIGN KEY (related_document_id) REFERENCES building_documents(id)"
      },
      {
        "name": "building_knowledge_source_type_check",
        "definition": "CHECK ((source_type = ANY (ARRAY['user_input'::text, 'document'::text, 'ai_inference'::text, 'system'::text, 'document_generation'::text])))"
      }
    ],
    "indexes": [
      {
        "name": "building_knowledge_pkey",
        "definition": "CREATE UNIQUE INDEX building_knowledge_pkey ON public.building_knowledge USING btree (id)"
      },
      {
        "name": "idx_building_knowledge_building",
        "definition": "CREATE INDEX idx_building_knowledge_building ON public.building_knowledge USING btree (building_id)"
      },
      {
        "name": "idx_building_knowledge_category",
        "definition": "CREATE INDEX idx_building_knowledge_category ON public.building_knowledge USING btree (category)"
      },
      {
        "name": "idx_building_knowledge_date",
        "definition": "CREATE INDEX idx_building_knowledge_date ON public.building_knowledge USING btree (created_at DESC)"
      },
      {
        "name": "idx_building_knowledge_verified",
        "definition": "CREATE INDEX idx_building_knowledge_verified ON public.building_knowledge USING btree (verified)"
      },
      {
        "name": "idx_building_knowledge_search",
        "definition": "CREATE INDEX idx_building_knowledge_search ON public.building_knowledge USING gin (to_tsvector('english'::regconfig, ((question || ' '::text) || answer)))"
      }
    ]
  },
  "building_knowledge_audit": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "exported_by",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "export_format",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "total_records",
        "type": "integer",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "category_filter",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "date_range_start",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "date_range_end",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "file_url",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "file_size_bytes",
        "type": "integer",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "exported_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "building_knowledge_audit_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "building_knowledge_audit_export_format_check",
        "definition": "CHECK ((export_format = ANY (ARRAY['pdf'::text, 'csv'::text, 'json'::text])))"
      },
      {
        "name": "building_knowledge_audit_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "building_knowledge_audit_pkey",
        "definition": "CREATE UNIQUE INDEX building_knowledge_audit_pkey ON public.building_knowledge_audit USING btree (id)"
      },
      {
        "name": "idx_knowledge_audit_building",
        "definition": "CREATE INDEX idx_knowledge_audit_building ON public.building_knowledge_audit USING btree (building_id)"
      },
      {
        "name": "idx_knowledge_audit_date",
        "definition": "CREATE INDEX idx_knowledge_audit_date ON public.building_knowledge_audit USING btree (exported_at DESC)"
      }
    ]
  },
  "building_legal": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "record_type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "description",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "party_name",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "solicitor_name",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "solicitor_contact",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "date_opened",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "date_closed",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "building_legal_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "building_legal_document_id_fkey",
        "definition": "FOREIGN KEY (document_id) REFERENCES building_documents(id)"
      },
      {
        "name": "building_legal_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "building_legal_pkey",
        "definition": "CREATE UNIQUE INDEX building_legal_pkey ON public.building_legal USING btree (id)"
      },
      {
        "name": "idx_building_legal_building_id",
        "definition": "CREATE INDEX idx_building_legal_building_id ON public.building_legal USING btree (building_id)"
      },
      {
        "name": "idx_building_legal_type",
        "definition": "CREATE INDEX idx_building_legal_type ON public.building_legal USING btree (record_type)"
      },
      {
        "name": "idx_building_legal_status",
        "definition": "CREATE INDEX idx_building_legal_status ON public.building_legal USING btree (status)"
      }
    ]
  },
  "building_safety_case": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "version",
        "type": "integer",
        "max_length": null,
        "nullable": false,
        "default": "1"
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'draft'::text"
      },
      {
        "name": "summary",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "executive_summary",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "golden_thread",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": "'{}'::jsonb"
      },
      {
        "name": "compiled_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "compiled_by",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "published_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_path",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "review_due_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "next_review_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "building_safety_case_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "building_safety_case_document_id_fkey",
        "definition": "FOREIGN KEY (document_id) REFERENCES building_documents(id)"
      },
      {
        "name": "building_safety_case_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "building_safety_case_status_check",
        "definition": "CHECK ((status = ANY (ARRAY['draft'::text, 'published'::text, 'superseded'::text])))"
      }
    ],
    "indexes": [
      {
        "name": "building_safety_case_pkey",
        "definition": "CREATE UNIQUE INDEX building_safety_case_pkey ON public.building_safety_case USING btree (id)"
      },
      {
        "name": "idx_safety_case_building",
        "definition": "CREATE INDEX idx_safety_case_building ON public.building_safety_case USING btree (building_id, version DESC)"
      },
      {
        "name": "idx_safety_case_status",
        "definition": "CREATE INDEX idx_safety_case_status ON public.building_safety_case USING btree (status)"
      },
      {
        "name": "idx_safety_case_review_due",
        "definition": "CREATE INDEX idx_safety_case_review_due ON public.building_safety_case USING btree (review_due_date) WHERE (status = 'published'::text)"
      }
    ]
  },
  "building_staff": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "staff_type",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "description",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "employee_name",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "position",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "start_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "end_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "building_staff_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "building_staff_document_id_fkey",
        "definition": "FOREIGN KEY (document_id) REFERENCES building_documents(id)"
      },
      {
        "name": "building_staff_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "building_staff_pkey",
        "definition": "CREATE UNIQUE INDEX building_staff_pkey ON public.building_staff USING btree (id)"
      },
      {
        "name": "idx_building_staff_building_id",
        "definition": "CREATE INDEX idx_building_staff_building_id ON public.building_staff USING btree (building_id)"
      },
      {
        "name": "idx_building_staff_type",
        "definition": "CREATE INDEX idx_building_staff_type ON public.building_staff USING btree (staff_type)"
      },
      {
        "name": "idx_building_staff_building",
        "definition": "CREATE INDEX idx_building_staff_building ON public.building_staff USING btree (building_id)"
      }
    ]
  },
  "building_statutory_reports": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "report_type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "report_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "next_due_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "building_statutory_reports_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "building_statutory_reports_document_id_fkey",
        "definition": "FOREIGN KEY (document_id) REFERENCES building_documents(id)"
      },
      {
        "name": "building_statutory_reports_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "building_statutory_reports_pkey",
        "definition": "CREATE UNIQUE INDEX building_statutory_reports_pkey ON public.building_statutory_reports USING btree (id)"
      },
      {
        "name": "idx_building_statutory_reports_building_id",
        "definition": "CREATE INDEX idx_building_statutory_reports_building_id ON public.building_statutory_reports USING btree (building_id)"
      },
      {
        "name": "idx_building_statutory_reports_type",
        "definition": "CREATE INDEX idx_building_statutory_reports_type ON public.building_statutory_reports USING btree (report_type)"
      },
      {
        "name": "idx_building_statutory_reports_next_due",
        "definition": "CREATE INDEX idx_building_statutory_reports_next_due ON public.building_statutory_reports USING btree (next_due_date)"
      }
    ]
  },
  "building_summary": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "total_units",
        "type": "integer",
        "max_length": null,
        "nullable": false,
        "default": "0"
      },
      {
        "name": "occupied_units",
        "type": "integer",
        "max_length": null,
        "nullable": false,
        "default": "0"
      },
      {
        "name": "total_arrears",
        "type": "numeric",
        "max_length": null,
        "nullable": false,
        "default": "0"
      },
      {
        "name": "reserve_balance",
        "type": "numeric",
        "max_length": null,
        "nullable": false,
        "default": "0"
      },
      {
        "name": "monthly_income",
        "type": "numeric",
        "max_length": null,
        "nullable": false,
        "default": "0"
      },
      {
        "name": "monthly_expenses",
        "type": "numeric",
        "max_length": null,
        "nullable": false,
        "default": "0"
      },
      {
        "name": "last_updated",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "building_summary_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "building_summary_pkey",
        "definition": "CREATE UNIQUE INDEX building_summary_pkey ON public.building_summary USING btree (id)"
      },
      {
        "name": "idx_building_summary_building_id",
        "definition": "CREATE INDEX idx_building_summary_building_id ON public.building_summary USING btree (building_id)"
      },
      {
        "name": "idx_building_summary_last_updated",
        "definition": "CREATE INDEX idx_building_summary_last_updated ON public.building_summary USING btree (last_updated DESC)"
      }
    ]
  },
  "building_timeline_events": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "event_type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "ref_table",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "ref_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "summary",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "description",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "meta",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": "'{}'::jsonb"
      },
      {
        "name": "created_by",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "building_timeline_events_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "building_timeline_events_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "building_timeline_events_pkey",
        "definition": "CREATE UNIQUE INDEX building_timeline_events_pkey ON public.building_timeline_events USING btree (id)"
      },
      {
        "name": "idx_timeline_building",
        "definition": "CREATE INDEX idx_timeline_building ON public.building_timeline_events USING btree (building_id, created_at DESC)"
      },
      {
        "name": "idx_timeline_event_type",
        "definition": "CREATE INDEX idx_timeline_event_type ON public.building_timeline_events USING btree (event_type)"
      },
      {
        "name": "idx_timeline_ref",
        "definition": "CREATE INDEX idx_timeline_ref ON public.building_timeline_events USING btree (ref_table, ref_id)"
      }
    ]
  },
  "building_title_deeds": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "record_type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "title_number",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "description",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "building_title_deeds_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "building_title_deeds_document_id_fkey",
        "definition": "FOREIGN KEY (document_id) REFERENCES building_documents(id)"
      },
      {
        "name": "building_title_deeds_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "building_title_deeds_pkey",
        "definition": "CREATE UNIQUE INDEX building_title_deeds_pkey ON public.building_title_deeds USING btree (id)"
      },
      {
        "name": "idx_building_title_deeds_building_id",
        "definition": "CREATE INDEX idx_building_title_deeds_building_id ON public.building_title_deeds USING btree (building_id)"
      },
      {
        "name": "idx_building_title_deeds_type",
        "definition": "CREATE INDEX idx_building_title_deeds_type ON public.building_title_deeds USING btree (record_type)"
      }
    ]
  },
  "building_todo": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "title",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "description",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "priority",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'Todo'::text"
      },
      {
        "name": "due_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "assigned_to",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "source",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "source_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "metadata",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_by",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "completed_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "building_todo_assigned_to_fkey",
        "definition": "FOREIGN KEY (assigned_to) REFERENCES auth.users(id) ON DELETE SET NULL"
      },
      {
        "name": "building_todo_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "building_todo_created_by_fkey",
        "definition": "FOREIGN KEY (created_by) REFERENCES auth.users(id) ON DELETE SET NULL"
      },
      {
        "name": "building_todo_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "building_todo_priority_check",
        "definition": "CHECK ((priority = ANY (ARRAY['Low'::text, 'Medium'::text, 'High'::text, 'Critical'::text])))"
      },
      {
        "name": "building_todo_status_check",
        "definition": "CHECK ((status = ANY (ARRAY['Todo'::text, 'InProgress'::text, 'Completed'::text, 'Cancelled'::text])))"
      }
    ],
    "indexes": [
      {
        "name": "building_todo_pkey",
        "definition": "CREATE UNIQUE INDEX building_todo_pkey ON public.building_todo USING btree (id)"
      },
      {
        "name": "idx_building_todo_building_id",
        "definition": "CREATE INDEX idx_building_todo_building_id ON public.building_todo USING btree (building_id)"
      },
      {
        "name": "idx_building_todo_status",
        "definition": "CREATE INDEX idx_building_todo_status ON public.building_todo USING btree (status)"
      },
      {
        "name": "idx_building_todo_priority",
        "definition": "CREATE INDEX idx_building_todo_priority ON public.building_todo USING btree (priority)"
      },
      {
        "name": "idx_building_todo_due_date",
        "definition": "CREATE INDEX idx_building_todo_due_date ON public.building_todo USING btree (due_date)"
      },
      {
        "name": "idx_building_todo_assigned_to",
        "definition": "CREATE INDEX idx_building_todo_assigned_to ON public.building_todo USING btree (assigned_to)"
      },
      {
        "name": "idx_building_todo_source",
        "definition": "CREATE INDEX idx_building_todo_source ON public.building_todo USING btree (source)"
      }
    ]
  },
  "building_todos": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "title",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "description",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "due_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'open'::text"
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "source",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'manual'::text"
      },
      {
        "name": "linked_work_order_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "priority",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'normal'::text"
      },
      {
        "name": "created_by",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "details",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "building_todos_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "building_todos_linked_work_order_id_fkey",
        "definition": "FOREIGN KEY (linked_work_order_id) REFERENCES works_orders(id)"
      },
      {
        "name": "building_todos_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "building_todos_status_check",
        "definition": "CHECK ((status = ANY (ARRAY['pending'::text, 'in_progress'::text, 'awaiting_invoice'::text, 'awaiting_review'::text, 'completed'::text, 'done'::text])))"
      }
    ],
    "indexes": [
      {
        "name": "building_todos_pkey",
        "definition": "CREATE UNIQUE INDEX building_todos_pkey ON public.building_todos USING btree (id)"
      },
      {
        "name": "idx_building_todos_work_order",
        "definition": "CREATE INDEX idx_building_todos_work_order ON public.building_todos USING btree (linked_work_order_id)"
      },
      {
        "name": "idx_building_todos_status",
        "definition": "CREATE INDEX idx_building_todos_status ON public.building_todos USING btree (status)"
      },
      {
        "name": "idx_building_todos_source",
        "definition": "CREATE INDEX idx_building_todos_source ON public.building_todos USING btree (source)"
      }
    ]
  },
  "building_utilities": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "utility_type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "provider_name",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "account_number",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "meter_numbers",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "contact_phone",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "location",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "building_utilities_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "building_utilities_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "building_utilities_pkey",
        "definition": "CREATE UNIQUE INDEX building_utilities_pkey ON public.building_utilities USING btree (id)"
      },
      {
        "name": "idx_building_utilities_building_id",
        "definition": "CREATE INDEX idx_building_utilities_building_id ON public.building_utilities USING btree (building_id)"
      },
      {
        "name": "idx_building_utilities_type",
        "definition": "CREATE INDEX idx_building_utilities_type ON public.building_utilities USING btree (utility_type)"
      }
    ]
  },
  "building_warranties": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "item_type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "supplier",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "installation_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "warranty_expiry",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "building_warranties_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "building_warranties_document_id_fkey",
        "definition": "FOREIGN KEY (document_id) REFERENCES building_documents(id)"
      },
      {
        "name": "building_warranties_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "building_warranties_pkey",
        "definition": "CREATE UNIQUE INDEX building_warranties_pkey ON public.building_warranties USING btree (id)"
      },
      {
        "name": "idx_building_warranties_building_id",
        "definition": "CREATE INDEX idx_building_warranties_building_id ON public.building_warranties USING btree (building_id)"
      },
      {
        "name": "idx_building_warranties_type",
        "definition": "CREATE INDEX idx_building_warranties_type ON public.building_warranties USING btree (item_type)"
      },
      {
        "name": "idx_building_warranties_expiry",
        "definition": "CREATE INDEX idx_building_warranties_expiry ON public.building_warranties USING btree (warranty_expiry)"
      }
    ]
  },
  "buildings": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "portfolio_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "name",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "address",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "number_of_units",
        "type": "integer",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "previous_agents",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "current_accountants",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "accountant_contact",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "demand_date_1",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "demand_date_2",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "year_end_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "management_fee_ex_vat",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "management_fee_inc_vat",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "company_secretary_fee_ex_vat",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "company_secretary_fee_inc_vat",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "ground_rent_applicable",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "ground_rent_charges",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "insurance_broker",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "insurance_renewal_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "section_20_limit_inc_vat",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "expenditure_limit",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "additional_info",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "agency_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "buildings_agency_id_fkey",
        "definition": "FOREIGN KEY (agency_id) REFERENCES agencies(id) ON DELETE CASCADE"
      },
      {
        "name": "buildings_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "buildings_portfolio_id_fkey",
        "definition": "FOREIGN KEY (portfolio_id) REFERENCES portfolios(id) ON DELETE CASCADE"
      }
    ],
    "indexes": [
      {
        "name": "buildings_pkey",
        "definition": "CREATE UNIQUE INDEX buildings_pkey ON public.buildings USING btree (id)"
      },
      {
        "name": "idx_buildings_agency_id",
        "definition": "CREATE INDEX idx_buildings_agency_id ON public.buildings USING btree (agency_id)"
      }
    ]
  },
  "chat_messages": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "session_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "role",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "content",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "chat_messages_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "chat_messages_role_check",
        "definition": "CHECK ((role = ANY (ARRAY['user'::text, 'ai'::text, 'system'::text])))"
      },
      {
        "name": "chat_messages_session_id_fkey",
        "definition": "FOREIGN KEY (session_id) REFERENCES lead_chat_sessions(id) ON DELETE CASCADE"
      }
    ],
    "indexes": [
      {
        "name": "chat_messages_pkey",
        "definition": "CREATE UNIQUE INDEX chat_messages_pkey ON public.chat_messages USING btree (id)"
      },
      {
        "name": "idx_chat_messages_session_id",
        "definition": "CREATE INDEX idx_chat_messages_session_id ON public.chat_messages USING btree (session_id)"
      },
      {
        "name": "idx_chat_messages_created_at",
        "definition": "CREATE INDEX idx_chat_messages_created_at ON public.chat_messages USING btree (created_at)"
      }
    ]
  },
  "chat_sessions": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "title",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": "'New Chat'::text"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "user_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": false,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": false,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "chat_sessions_pkey1",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "chat_sessions_pkey1",
        "definition": "CREATE UNIQUE INDEX chat_sessions_pkey1 ON public.chat_sessions USING btree (id)"
      }
    ]
  },
  "communications_log": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "communication_type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "subject",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "summary",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "content",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "from_party",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "to_party",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "leaseholder_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'sent'::text"
      },
      {
        "name": "direction",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "is_section20",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "false"
      },
      {
        "name": "consultation_deadline",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_ids",
        "type": "ARRAY",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "communication_date",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "metadata",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": "'{}'::jsonb"
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "recipients",
        "type": "ARRAY",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "audience",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "channel",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'email'::text"
      },
      {
        "name": "related_works_order_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "related_todo_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "sent_by",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "body",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "communications_log_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "communications_log_communication_type_check",
        "definition": "CHECK ((communication_type = ANY (ARRAY['email'::text, 'letter'::text, 'phone'::text, 'meeting'::text, 'section20'::text, 'notice'::text, 'complaint'::text, 'general'::text])))"
      },
      {
        "name": "communications_log_direction_check",
        "definition": "CHECK ((direction = ANY (ARRAY['inbound'::text, 'outbound'::text])))"
      },
      {
        "name": "communications_log_leaseholder_id_fkey",
        "definition": "FOREIGN KEY (leaseholder_id) REFERENCES leaseholders(id)"
      },
      {
        "name": "communications_log_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "communications_log_related_todo_id_fkey",
        "definition": "FOREIGN KEY (related_todo_id) REFERENCES building_todos(id)"
      },
      {
        "name": "communications_log_related_works_order_id_fkey",
        "definition": "FOREIGN KEY (related_works_order_id) REFERENCES works_orders(id)"
      },
      {
        "name": "communications_log_status_check",
        "definition": "CHECK ((status = ANY (ARRAY['draft'::text, 'sent'::text, 'delivered'::text, 'read'::text, 'responded'::text, 'archived'::text, 'open'::text])))"
      }
    ],
    "indexes": [
      {
        "name": "communications_log_pkey",
        "definition": "CREATE UNIQUE INDEX communications_log_pkey ON public.communications_log USING btree (id)"
      },
      {
        "name": "idx_communications_building",
        "definition": "CREATE INDEX idx_communications_building ON public.communications_log USING btree (building_id)"
      },
      {
        "name": "idx_communications_type",
        "definition": "CREATE INDEX idx_communications_type ON public.communications_log USING btree (communication_type)"
      },
      {
        "name": "idx_communications_date",
        "definition": "CREATE INDEX idx_communications_date ON public.communications_log USING btree (communication_date DESC)"
      },
      {
        "name": "idx_communications_section20",
        "definition": "CREATE INDEX idx_communications_section20 ON public.communications_log USING btree (is_section20) WHERE (is_section20 = true)"
      },
      {
        "name": "idx_comms_work_order",
        "definition": "CREATE INDEX idx_comms_work_order ON public.communications_log USING btree (related_works_order_id)"
      },
      {
        "name": "idx_comms_todo",
        "definition": "CREATE INDEX idx_comms_todo ON public.communications_log USING btree (related_todo_id)"
      },
      {
        "name": "idx_comms_audience",
        "definition": "CREATE INDEX idx_comms_audience ON public.communications_log USING btree (audience)"
      }
    ]
  },
  "company_secretary": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "company_house_filing_code",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "memorandum_articles",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "stock_transfer_forms",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "certificate_of_incorporation",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "seal_available",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "audited_accounts_years",
        "type": "integer",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "company_secretary_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "company_secretary_document_id_fkey",
        "definition": "FOREIGN KEY (document_id) REFERENCES building_documents(id)"
      },
      {
        "name": "company_secretary_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "company_secretary_pkey",
        "definition": "CREATE UNIQUE INDEX company_secretary_pkey ON public.company_secretary USING btree (id)"
      },
      {
        "name": "idx_company_secretary_building_id",
        "definition": "CREATE INDEX idx_company_secretary_building_id ON public.company_secretary USING btree (building_id)"
      }
    ]
  },
  "compliance_actions": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "report_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "description",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "category",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "recommended_action",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "location",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "priority",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'medium'::text"
      },
      {
        "name": "urgency_days",
        "type": "integer",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "deadline",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'open'::text"
      },
      {
        "name": "completed_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "linked_todo_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "linked_work_order_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "assigned_contractor_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "estimated_cost",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "actual_cost",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "requires_section20",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "false"
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "internal_notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "bsr_ref",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "reviewed_by",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "reviewed_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "compliance_actions_assigned_contractor_id_fkey",
        "definition": "FOREIGN KEY (assigned_contractor_id) REFERENCES contractors(id)"
      },
      {
        "name": "compliance_actions_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "compliance_actions_linked_todo_id_fkey",
        "definition": "FOREIGN KEY (linked_todo_id) REFERENCES building_todos(id)"
      },
      {
        "name": "compliance_actions_linked_work_order_id_fkey",
        "definition": "FOREIGN KEY (linked_work_order_id) REFERENCES works_orders(id)"
      },
      {
        "name": "compliance_actions_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "compliance_actions_report_id_fkey",
        "definition": "FOREIGN KEY (report_id) REFERENCES compliance_reports(id) ON DELETE CASCADE"
      }
    ],
    "indexes": [
      {
        "name": "compliance_actions_pkey",
        "definition": "CREATE UNIQUE INDEX compliance_actions_pkey ON public.compliance_actions USING btree (id)"
      },
      {
        "name": "idx_compliance_actions_report",
        "definition": "CREATE INDEX idx_compliance_actions_report ON public.compliance_actions USING btree (report_id)"
      },
      {
        "name": "idx_compliance_actions_building",
        "definition": "CREATE INDEX idx_compliance_actions_building ON public.compliance_actions USING btree (building_id)"
      },
      {
        "name": "idx_compliance_actions_category",
        "definition": "CREATE INDEX idx_compliance_actions_category ON public.compliance_actions USING btree (category)"
      },
      {
        "name": "idx_compliance_actions_status",
        "definition": "CREATE INDEX idx_compliance_actions_status ON public.compliance_actions USING btree (status)"
      },
      {
        "name": "idx_compliance_actions_deadline",
        "definition": "CREATE INDEX idx_compliance_actions_deadline ON public.compliance_actions USING btree (deadline) WHERE (status <> 'completed'::text)"
      },
      {
        "name": "idx_compliance_actions_work_order",
        "definition": "CREATE INDEX idx_compliance_actions_work_order ON public.compliance_actions USING btree (linked_work_order_id)"
      },
      {
        "name": "idx_compliance_actions_bsr_ref",
        "definition": "CREATE INDEX idx_compliance_actions_bsr_ref ON public.compliance_actions USING btree (bsr_ref)"
      },
      {
        "name": "idx_compliance_actions_reviewed",
        "definition": "CREATE INDEX idx_compliance_actions_reviewed ON public.compliance_actions USING btree (reviewed_by, reviewed_at)"
      }
    ]
  },
  "compliance_alerts": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "alert_type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "severity",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "title",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "description",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "due_date",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": "'active'::text"
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "resolved_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "metadata",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "compliance_alerts_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "compliance_alerts_severity_check",
        "definition": "CHECK ((severity = ANY (ARRAY['low'::text, 'medium'::text, 'high'::text, 'critical'::text])))"
      },
      {
        "name": "compliance_alerts_status_check",
        "definition": "CHECK ((status = ANY (ARRAY['active'::text, 'resolved'::text, 'dismissed'::text])))"
      }
    ],
    "indexes": [
      {
        "name": "compliance_alerts_pkey",
        "definition": "CREATE UNIQUE INDEX compliance_alerts_pkey ON public.compliance_alerts USING btree (id)"
      },
      {
        "name": "idx_compliance_alerts_building_id",
        "definition": "CREATE INDEX idx_compliance_alerts_building_id ON public.compliance_alerts USING btree (building_id)"
      },
      {
        "name": "idx_compliance_alerts_status",
        "definition": "CREATE INDEX idx_compliance_alerts_status ON public.compliance_alerts USING btree (status)"
      },
      {
        "name": "idx_compliance_alerts_due_date",
        "definition": "CREATE INDEX idx_compliance_alerts_due_date ON public.compliance_alerts USING btree (due_date)"
      }
    ]
  },
  "compliance_assets": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "description",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "asset_name",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "asset_type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "inspection_frequency",
        "type": "interval",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "last_inspection_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "next_due_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "compliance_status",
        "type": "character varying",
        "max_length": 50,
        "nullable": true,
        "default": "'unknown'::character varying"
      },
      {
        "name": "location",
        "type": "character varying",
        "max_length": 255,
        "nullable": true,
        "default": null
      },
      {
        "name": "responsible_party",
        "type": "character varying",
        "max_length": 255,
        "nullable": true,
        "default": null
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "is_active",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "true"
      },
      {
        "name": "confidence_score",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": "1.00"
      },
      {
        "name": "extraction_source",
        "type": "USER-DEFINED",
        "max_length": null,
        "nullable": true,
        "default": "'ai_extraction'::source_type"
      },
      {
        "name": "reinspection_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "inspection_contractor",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "compliance_assets_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id)"
      },
      {
        "name": "compliance_assets_confidence_score_check",
        "definition": "CHECK (((confidence_score >= (0)::numeric) AND (confidence_score <= (1)::numeric)))"
      },
      {
        "name": "compliance_assets_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "compliance_assets_pkey",
        "definition": "CREATE UNIQUE INDEX compliance_assets_pkey ON public.compliance_assets USING btree (id)"
      },
      {
        "name": "idx_compliance_assets_building_id",
        "definition": "CREATE INDEX idx_compliance_assets_building_id ON public.compliance_assets USING btree (building_id)"
      },
      {
        "name": "idx_compliance_assets_type",
        "definition": "CREATE INDEX idx_compliance_assets_type ON public.compliance_assets USING btree (asset_type)"
      },
      {
        "name": "idx_compliance_next_due_date",
        "definition": "CREATE INDEX idx_compliance_next_due_date ON public.compliance_assets USING btree (next_due_date) WHERE (next_due_date IS NOT NULL)"
      },
      {
        "name": "idx_compliance_status",
        "definition": "CREATE INDEX idx_compliance_status ON public.compliance_assets USING btree (compliance_status)"
      },
      {
        "name": "idx_compliance_assets_status",
        "definition": "CREATE INDEX idx_compliance_assets_status ON public.compliance_assets USING btree (compliance_status)"
      },
      {
        "name": "idx_compliance_assets_next_due",
        "definition": "CREATE INDEX idx_compliance_assets_next_due ON public.compliance_assets USING btree (next_due_date)"
      },
      {
        "name": "idx_compliance_building_status",
        "definition": "CREATE INDEX idx_compliance_building_status ON public.compliance_assets USING btree (building_id, compliance_status)"
      },
      {
        "name": "idx_compliance_next_inspection",
        "definition": "CREATE INDEX idx_compliance_next_inspection ON public.compliance_assets USING btree (reinspection_date)"
      },
      {
        "name": "idx_compliance_confidence",
        "definition": "CREATE INDEX idx_compliance_confidence ON public.compliance_assets USING btree (confidence_score) WHERE (confidence_score < 0.80)"
      }
    ]
  },
  "compliance_reports": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "title",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "assessor",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "assessor_company",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "assessed_date",
        "type": "date",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "next_due_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "uploaded_date",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "risk_summary",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": "'{}'::jsonb"
      },
      {
        "name": "overall_status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "raw_text",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "extracted_data",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": "'{}'::jsonb"
      },
      {
        "name": "source_file",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "bsr_category",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "is_bsr_critical",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "false"
      },
      {
        "name": "is_active",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "true"
      },
      {
        "name": "processing_status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'completed'::text"
      },
      {
        "name": "confidence_score",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "hazard_type",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "risk_rating",
        "type": "integer",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "compliance_reports_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "compliance_reports_document_id_fkey",
        "definition": "FOREIGN KEY (document_id) REFERENCES building_documents(id)"
      },
      {
        "name": "compliance_reports_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "compliance_reports_pkey",
        "definition": "CREATE UNIQUE INDEX compliance_reports_pkey ON public.compliance_reports USING btree (id)"
      },
      {
        "name": "idx_compliance_reports_building",
        "definition": "CREATE INDEX idx_compliance_reports_building ON public.compliance_reports USING btree (building_id)"
      },
      {
        "name": "idx_compliance_reports_type",
        "definition": "CREATE INDEX idx_compliance_reports_type ON public.compliance_reports USING btree (type)"
      },
      {
        "name": "idx_compliance_reports_next_due",
        "definition": "CREATE INDEX idx_compliance_reports_next_due ON public.compliance_reports USING btree (next_due_date) WHERE (is_active = true)"
      },
      {
        "name": "idx_compliance_reports_bsr",
        "definition": "CREATE INDEX idx_compliance_reports_bsr ON public.compliance_reports USING btree (bsr_category) WHERE (is_bsr_critical = true)"
      },
      {
        "name": "idx_compliance_reports_status",
        "definition": "CREATE INDEX idx_compliance_reports_status ON public.compliance_reports USING btree (overall_status)"
      },
      {
        "name": "idx_compliance_reports_bsr_category",
        "definition": "CREATE INDEX idx_compliance_reports_bsr_category ON public.compliance_reports USING btree (bsr_category)"
      },
      {
        "name": "idx_compliance_reports_hazard_type",
        "definition": "CREATE INDEX idx_compliance_reports_hazard_type ON public.compliance_reports USING btree (hazard_type)"
      },
      {
        "name": "idx_compliance_reports_risk_rating",
        "definition": "CREATE INDEX idx_compliance_reports_risk_rating ON public.compliance_reports USING btree (risk_rating DESC)"
      }
    ]
  },
  "compliance_templates": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "name",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "category",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "subject",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "body_template",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "variables",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": "'[]'::jsonb"
      },
      {
        "name": "is_active",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "true"
      },
      {
        "name": "is_default",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "false"
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "compliance_templates_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "compliance_templates_pkey",
        "definition": "CREATE UNIQUE INDEX compliance_templates_pkey ON public.compliance_templates USING btree (id)"
      },
      {
        "name": "idx_compliance_templates_type",
        "definition": "CREATE INDEX idx_compliance_templates_type ON public.compliance_templates USING btree (type)"
      },
      {
        "name": "idx_compliance_templates_category",
        "definition": "CREATE INDEX idx_compliance_templates_category ON public.compliance_templates USING btree (category)"
      }
    ]
  },
  "compliance_todo": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "action_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "title",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "description",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "category",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "risk_level",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'C3'::text"
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'open'::text"
      },
      {
        "name": "linked_work_order_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "linked_communication_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "due_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "completed_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_by",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "compliance_todo_action_id_fkey",
        "definition": "FOREIGN KEY (action_id) REFERENCES compliance_actions(id) ON DELETE SET NULL"
      },
      {
        "name": "compliance_todo_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "compliance_todo_linked_communication_id_fkey",
        "definition": "FOREIGN KEY (linked_communication_id) REFERENCES communications_log(id) ON DELETE SET NULL"
      },
      {
        "name": "compliance_todo_linked_work_order_id_fkey",
        "definition": "FOREIGN KEY (linked_work_order_id) REFERENCES works_orders(id) ON DELETE SET NULL"
      },
      {
        "name": "compliance_todo_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "compliance_todo_risk_level_check",
        "definition": "CHECK ((risk_level = ANY (ARRAY['C1'::text, 'C2'::text, 'C3'::text, 'Info'::text, 'FPN'::text])))"
      },
      {
        "name": "compliance_todo_status_check",
        "definition": "CHECK ((status = ANY (ARRAY['open'::text, 'in_progress'::text, 'awaiting_review'::text, 'complete'::text, 'cancelled'::text])))"
      }
    ],
    "indexes": [
      {
        "name": "compliance_todo_pkey",
        "definition": "CREATE UNIQUE INDEX compliance_todo_pkey ON public.compliance_todo USING btree (id)"
      },
      {
        "name": "idx_compliance_todo_building",
        "definition": "CREATE INDEX idx_compliance_todo_building ON public.compliance_todo USING btree (building_id)"
      },
      {
        "name": "idx_compliance_todo_action",
        "definition": "CREATE INDEX idx_compliance_todo_action ON public.compliance_todo USING btree (action_id)"
      },
      {
        "name": "idx_compliance_todo_status",
        "definition": "CREATE INDEX idx_compliance_todo_status ON public.compliance_todo USING btree (status)"
      },
      {
        "name": "idx_compliance_todo_risk_level",
        "definition": "CREATE INDEX idx_compliance_todo_risk_level ON public.compliance_todo USING btree (risk_level)"
      },
      {
        "name": "idx_compliance_todo_due_date",
        "definition": "CREATE INDEX idx_compliance_todo_due_date ON public.compliance_todo USING btree (due_date) WHERE (status <> ALL (ARRAY['complete'::text, 'cancelled'::text]))"
      }
    ]
  },
  "contractor_contracts": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "contractor_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "service_category",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "contract_value",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "payment_frequency",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "start_date",
        "type": "date",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "end_date",
        "type": "date",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "notice_period_days",
        "type": "integer",
        "max_length": null,
        "nullable": true,
        "default": "90"
      },
      {
        "name": "actual_spend",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": "0"
      },
      {
        "name": "budget_variance",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": "0"
      },
      {
        "name": "linked_budget_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "linked_compliance_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "is_active",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "true"
      },
      {
        "name": "auto_renew",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "false"
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "contract_document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "contractor_contracts_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "contractor_contracts_contract_document_id_fkey",
        "definition": "FOREIGN KEY (contract_document_id) REFERENCES building_documents(id)"
      },
      {
        "name": "contractor_contracts_contractor_id_fkey",
        "definition": "FOREIGN KEY (contractor_id) REFERENCES contractors(id) ON DELETE CASCADE"
      },
      {
        "name": "contractor_contracts_linked_budget_id_fkey",
        "definition": "FOREIGN KEY (linked_budget_id) REFERENCES budgets(id) ON DELETE SET NULL"
      },
      {
        "name": "contractor_contracts_linked_compliance_id_fkey",
        "definition": "FOREIGN KEY (linked_compliance_id) REFERENCES compliance_assets(id) ON DELETE SET NULL"
      },
      {
        "name": "contractor_contracts_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "contractor_contracts_service_category_check",
        "definition": "CHECK ((service_category = ANY (ARRAY['lifts'::text, 'security'::text, 'fire_alarm'::text, 'cleaning'::text, 'maintenance'::text, 'insurance'::text, 'legal'::text, 'utilities'::text, 'grounds'::text, 'waste'::text, 'other'::text, 'unspecified'::text])))"
      }
    ],
    "indexes": [
      {
        "name": "contractor_contracts_pkey",
        "definition": "CREATE UNIQUE INDEX contractor_contracts_pkey ON public.contractor_contracts USING btree (id)"
      },
      {
        "name": "idx_contractor_contracts_building",
        "definition": "CREATE INDEX idx_contractor_contracts_building ON public.contractor_contracts USING btree (building_id)"
      },
      {
        "name": "idx_contractor_contracts_contractor",
        "definition": "CREATE INDEX idx_contractor_contracts_contractor ON public.contractor_contracts USING btree (contractor_id)"
      },
      {
        "name": "idx_contractor_contracts_service",
        "definition": "CREATE INDEX idx_contractor_contracts_service ON public.contractor_contracts USING btree (service_category)"
      },
      {
        "name": "idx_contractor_contracts_dates",
        "definition": "CREATE INDEX idx_contractor_contracts_dates ON public.contractor_contracts USING btree (start_date, end_date) WHERE (is_active = true)"
      }
    ]
  },
  "contractors": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "name",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "company_name",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "email",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "phone",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "mobile",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "address",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "city",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "postcode",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "trade",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "services",
        "type": "ARRAY",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "hourly_rate",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "payment_terms_days",
        "type": "integer",
        "max_length": null,
        "nullable": true,
        "default": "30"
      },
      {
        "name": "insurance_provider",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "insurance_expiry",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "public_liability_amount",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": "5000000.00"
      },
      {
        "name": "rating",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "total_jobs",
        "type": "integer",
        "max_length": null,
        "nullable": true,
        "default": "0"
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "is_active",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "true"
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "contractors_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "contractors_pkey",
        "definition": "CREATE UNIQUE INDEX contractors_pkey ON public.contractors USING btree (id)"
      },
      {
        "name": "idx_contractors_trade",
        "definition": "CREATE INDEX idx_contractors_trade ON public.contractors USING btree (trade)"
      },
      {
        "name": "idx_contractors_active",
        "definition": "CREATE INDEX idx_contractors_active ON public.contractors USING btree (is_active) WHERE (is_active = true)"
      }
    ]
  },
  "conversation_state": {
    "columns": [
      {
        "name": "user_id",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "last_intent",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "last_files",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "last_result",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "conversation_state_pkey",
        "definition": "PRIMARY KEY (user_id)"
      }
    ],
    "indexes": [
      {
        "name": "conversation_state_pkey",
        "definition": "CREATE UNIQUE INDEX conversation_state_pkey ON public.conversation_state USING btree (user_id)"
      },
      {
        "name": "idx_conversation_state_updated",
        "definition": "CREATE INDEX idx_conversation_state_updated ON public.conversation_state USING btree (updated_at DESC)"
      }
    ]
  },
  "correspondence": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "subject",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "correspondent",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "correspondence_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "correspondence_document_id_fkey",
        "definition": "FOREIGN KEY (document_id) REFERENCES building_documents(id) ON DELETE CASCADE"
      },
      {
        "name": "correspondence_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "correspondence_pkey",
        "definition": "CREATE UNIQUE INDEX correspondence_pkey ON public.correspondence USING btree (id)"
      }
    ]
  },
  "document_ai_audit_log": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_name",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "field_extracted",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "original_value",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "suggested_value",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "confidence",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "extraction_model",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'claude-sonnet-4'::text"
      },
      {
        "name": "action_taken",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp without time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "document_ai_audit_log_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "document_ai_audit_log_confidence_check",
        "definition": "CHECK (((confidence >= (0)::numeric) AND (confidence <= (1)::numeric)))"
      },
      {
        "name": "document_ai_audit_log_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "document_ai_audit_log_pkey",
        "definition": "CREATE UNIQUE INDEX document_ai_audit_log_pkey ON public.document_ai_audit_log USING btree (id)"
      },
      {
        "name": "idx_ai_audit_building",
        "definition": "CREATE INDEX idx_ai_audit_building ON public.document_ai_audit_log USING btree (building_id)"
      },
      {
        "name": "idx_ai_audit_document",
        "definition": "CREATE INDEX idx_ai_audit_document ON public.document_ai_audit_log USING btree (document_id)"
      },
      {
        "name": "idx_ai_audit_created",
        "definition": "CREATE INDEX idx_ai_audit_created ON public.document_ai_audit_log USING btree (created_at DESC)"
      },
      {
        "name": "idx_ai_audit_confidence",
        "definition": "CREATE INDEX idx_ai_audit_confidence ON public.document_ai_audit_log USING btree (confidence)"
      }
    ]
  },
  "document_chunks": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "chunk_index",
        "type": "integer",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "content",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "embedding",
        "type": "USER-DEFINED",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "metadata",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": "'{}'::jsonb"
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "document_chunks_document_id_fkey",
        "definition": "FOREIGN KEY (document_id) REFERENCES founder_knowledge(id) ON DELETE CASCADE"
      },
      {
        "name": "document_chunks_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "document_chunks_pkey",
        "definition": "CREATE UNIQUE INDEX document_chunks_pkey ON public.document_chunks USING btree (id)"
      },
      {
        "name": "idx_document_chunks_embedding",
        "definition": "CREATE INDEX idx_document_chunks_embedding ON public.document_chunks USING ivfflat (embedding vector_cosine_ops)"
      },
      {
        "name": "idx_document_chunks_document",
        "definition": "CREATE INDEX idx_document_chunks_document ON public.document_chunks USING btree (document_id)"
      }
    ]
  },
  "document_processing_status": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "processing_type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "error_message",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "metadata",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": "'{}'::jsonb"
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "document_processing_status_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "document_processing_status_pkey",
        "definition": "CREATE UNIQUE INDEX document_processing_status_pkey ON public.document_processing_status USING btree (id)"
      },
      {
        "name": "idx_doc_processing_status",
        "definition": "CREATE INDEX idx_doc_processing_status ON public.document_processing_status USING btree (status)"
      },
      {
        "name": "idx_doc_processing_document",
        "definition": "CREATE INDEX idx_doc_processing_document ON public.document_processing_status USING btree (document_id)"
      }
    ]
  },
  "document_templates": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "name",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "description",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "field_map",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "file_url",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "document_templates_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "document_templates_pkey",
        "definition": "CREATE UNIQUE INDEX document_templates_pkey ON public.document_templates USING btree (id)"
      },
      {
        "name": "idx_document_templates_type",
        "definition": "CREATE INDEX idx_document_templates_type ON public.document_templates USING btree (type)"
      }
    ]
  },
  "email_communications": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "leaseholder_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "subject",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "from_email",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "from_name",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "to_email",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "cc_emails",
        "type": "ARRAY",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "bcc_emails",
        "type": "ARRAY",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "body",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "html_body",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "category",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "urgency",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "sentiment",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "is_complaint",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "false"
      },
      {
        "name": "is_urgent",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "false"
      },
      {
        "name": "requires_action",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "false"
      },
      {
        "name": "conversation_id",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "in_reply_to",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "email_references",
        "type": "ARRAY",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "extracted_info",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "intent_data",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'received'::text"
      },
      {
        "name": "reply_sent_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "resolved_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "source",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'outlook'::text"
      },
      {
        "name": "metadata",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "sent_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "email_communications_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "email_communications_leaseholder_id_fkey",
        "definition": "FOREIGN KEY (leaseholder_id) REFERENCES leaseholders(id) ON DELETE SET NULL"
      },
      {
        "name": "email_communications_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "email_communications_sentiment_check",
        "definition": "CHECK ((sentiment = ANY (ARRAY['positive'::text, 'neutral'::text, 'negative'::text])))"
      },
      {
        "name": "email_communications_source_check",
        "definition": "CHECK ((source = ANY (ARRAY['outlook'::text, 'manual'::text, 'api'::text, 'chat'::text])))"
      },
      {
        "name": "email_communications_status_check",
        "definition": "CHECK ((status = ANY (ARRAY['received'::text, 'replied'::text, 'resolved'::text, 'escalated'::text, 'archived'::text])))"
      },
      {
        "name": "email_communications_urgency_check",
        "definition": "CHECK ((urgency = ANY (ARRAY['low'::text, 'medium'::text, 'high'::text, 'urgent'::text])))"
      }
    ],
    "indexes": [
      {
        "name": "email_communications_pkey",
        "definition": "CREATE UNIQUE INDEX email_communications_pkey ON public.email_communications USING btree (id)"
      },
      {
        "name": "idx_email_comms_building",
        "definition": "CREATE INDEX idx_email_comms_building ON public.email_communications USING btree (building_id)"
      },
      {
        "name": "idx_email_comms_leaseholder",
        "definition": "CREATE INDEX idx_email_comms_leaseholder ON public.email_communications USING btree (leaseholder_id)"
      },
      {
        "name": "idx_email_comms_conversation",
        "definition": "CREATE INDEX idx_email_comms_conversation ON public.email_communications USING btree (conversation_id)"
      },
      {
        "name": "idx_email_comms_category",
        "definition": "CREATE INDEX idx_email_comms_category ON public.email_communications USING btree (category)"
      },
      {
        "name": "idx_email_comms_status",
        "definition": "CREATE INDEX idx_email_comms_status ON public.email_communications USING btree (status)"
      },
      {
        "name": "idx_email_comms_sent_at",
        "definition": "CREATE INDEX idx_email_comms_sent_at ON public.email_communications USING btree (sent_at DESC)"
      },
      {
        "name": "idx_email_comms_from_email",
        "definition": "CREATE INDEX idx_email_comms_from_email ON public.email_communications USING btree (from_email)"
      },
      {
        "name": "idx_email_comms_subject",
        "definition": "CREATE INDEX idx_email_comms_subject ON public.email_communications USING gin (to_tsvector('english'::regconfig, subject))"
      },
      {
        "name": "idx_email_comms_body",
        "definition": "CREATE INDEX idx_email_comms_body ON public.email_communications USING gin (to_tsvector('english'::regconfig, body))"
      },
      {
        "name": "idx_email_comms_search",
        "definition": "CREATE INDEX idx_email_comms_search ON public.email_communications USING gin (to_tsvector('english'::regconfig, ((subject || ' '::text) || body)))"
      }
    ]
  },
  "email_reply_drafts": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "email_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "user_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "draft_content",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "metadata",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "email_reply_drafts_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id)"
      },
      {
        "name": "email_reply_drafts_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "email_reply_drafts_user_id_fkey",
        "definition": "FOREIGN KEY (user_id) REFERENCES auth.users(id)"
      }
    ],
    "indexes": [
      {
        "name": "email_reply_drafts_pkey",
        "definition": "CREATE UNIQUE INDEX email_reply_drafts_pkey ON public.email_reply_drafts USING btree (id)"
      },
      {
        "name": "idx_email_reply_drafts_user_id",
        "definition": "CREATE INDEX idx_email_reply_drafts_user_id ON public.email_reply_drafts USING btree (user_id)"
      },
      {
        "name": "idx_email_reply_drafts_building_id",
        "definition": "CREATE INDEX idx_email_reply_drafts_building_id ON public.email_reply_drafts USING btree (building_id)"
      },
      {
        "name": "idx_email_reply_drafts_created_at",
        "definition": "CREATE INDEX idx_email_reply_drafts_created_at ON public.email_reply_drafts USING btree (created_at DESC)"
      }
    ]
  },
  "email_templates": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "name",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "description",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "category",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "subject_template",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "body_template",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "html_template",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "variables",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "usage_count",
        "type": "integer",
        "max_length": null,
        "nullable": true,
        "default": "0"
      },
      {
        "name": "last_used_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "is_active",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "true"
      },
      {
        "name": "created_by",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "email_templates_created_by_fkey",
        "definition": "FOREIGN KEY (created_by) REFERENCES auth.users(id)"
      },
      {
        "name": "email_templates_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "email_templates_pkey",
        "definition": "CREATE UNIQUE INDEX email_templates_pkey ON public.email_templates USING btree (id)"
      },
      {
        "name": "idx_email_templates_category",
        "definition": "CREATE INDEX idx_email_templates_category ON public.email_templates USING btree (category)"
      },
      {
        "name": "idx_email_templates_active",
        "definition": "CREATE INDEX idx_email_templates_active ON public.email_templates USING btree (is_active)"
      }
    ]
  },
  "events": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "title",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "description",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "event_type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "event_date",
        "type": "date",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "event_time",
        "type": "time without time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "duration_minutes",
        "type": "integer",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "location",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "is_virtual",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "false"
      },
      {
        "name": "meeting_link",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "attendees",
        "type": "ARRAY",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "required_quorum",
        "type": "integer",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'scheduled'::text"
      },
      {
        "name": "related_document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "related_compliance_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "send_reminder",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "true"
      },
      {
        "name": "reminder_days_before",
        "type": "integer",
        "max_length": null,
        "nullable": true,
        "default": "7"
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "metadata",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": "'{}'::jsonb"
      },
      {
        "name": "created_by",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "events_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "events_event_type_check",
        "definition": "CHECK ((event_type = ANY (ARRAY['agm'::text, 'egm'::text, 'inspection'::text, 'works'::text, 'meeting'::text, 'deadline'::text, 'other'::text])))"
      },
      {
        "name": "events_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "events_related_compliance_id_fkey",
        "definition": "FOREIGN KEY (related_compliance_id) REFERENCES compliance_assets(id)"
      },
      {
        "name": "events_related_document_id_fkey",
        "definition": "FOREIGN KEY (related_document_id) REFERENCES building_documents(id)"
      },
      {
        "name": "events_status_check",
        "definition": "CHECK ((status = ANY (ARRAY['scheduled'::text, 'confirmed'::text, 'in_progress'::text, 'completed'::text, 'cancelled'::text])))"
      }
    ],
    "indexes": [
      {
        "name": "events_pkey",
        "definition": "CREATE UNIQUE INDEX events_pkey ON public.events USING btree (id)"
      },
      {
        "name": "idx_events_building",
        "definition": "CREATE INDEX idx_events_building ON public.events USING btree (building_id)"
      },
      {
        "name": "idx_events_date",
        "definition": "CREATE INDEX idx_events_date ON public.events USING btree (event_date)"
      },
      {
        "name": "idx_events_type",
        "definition": "CREATE INDEX idx_events_type ON public.events USING btree (event_type)"
      },
      {
        "name": "idx_events_status",
        "definition": "CREATE INDEX idx_events_status ON public.events USING btree (status)"
      }
    ]
  },
  "fire_door_inspections": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "unit_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "location",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "inspection_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_path",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "fire_door_inspections_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id)"
      },
      {
        "name": "fire_door_inspections_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "fire_door_inspections_status_check",
        "definition": "CHECK ((status = ANY (ARRAY['compliant'::text, 'non-compliant'::text, 'overdue'::text, 'unknown'::text])))"
      },
      {
        "name": "fire_door_inspections_unit_id_fkey",
        "definition": "FOREIGN KEY (unit_id) REFERENCES units(id)"
      }
    ],
    "indexes": [
      {
        "name": "fire_door_inspections_pkey",
        "definition": "CREATE UNIQUE INDEX fire_door_inspections_pkey ON public.fire_door_inspections USING btree (id)"
      },
      {
        "name": "idx_fire_door_inspections_building",
        "definition": "CREATE INDEX idx_fire_door_inspections_building ON public.fire_door_inspections USING btree (building_id)"
      },
      {
        "name": "idx_fire_door_inspections_status",
        "definition": "CREATE INDEX idx_fire_door_inspections_status ON public.fire_door_inspections USING btree (status)"
      }
    ]
  },
  "founder_knowledge": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "title",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "content",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "category",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "subcategory",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "tags",
        "type": "ARRAY",
        "max_length": null,
        "nullable": true,
        "default": "'{}'::text[]"
      },
      {
        "name": "contexts",
        "type": "ARRAY",
        "max_length": null,
        "nullable": true,
        "default": "'{}'::text[]"
      },
      {
        "name": "priority",
        "type": "integer",
        "max_length": null,
        "nullable": true,
        "default": "1"
      },
      {
        "name": "version",
        "type": "integer",
        "max_length": null,
        "nullable": true,
        "default": "1"
      },
      {
        "name": "is_active",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "true"
      },
      {
        "name": "source_url",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "last_validated_by",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "founder_knowledge_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "founder_knowledge_pkey",
        "definition": "CREATE UNIQUE INDEX founder_knowledge_pkey ON public.founder_knowledge USING btree (id)"
      },
      {
        "name": "idx_founder_knowledge_category",
        "definition": "CREATE INDEX idx_founder_knowledge_category ON public.founder_knowledge USING btree (category)"
      },
      {
        "name": "idx_founder_knowledge_active",
        "definition": "CREATE INDEX idx_founder_knowledge_active ON public.founder_knowledge USING btree (is_active)"
      },
      {
        "name": "idx_founder_knowledge_tags",
        "definition": "CREATE INDEX idx_founder_knowledge_tags ON public.founder_knowledge USING gin (tags)"
      }
    ]
  },
  "invoices": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "unit_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "amount",
        "type": "numeric",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "due_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "works_order_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "contractor_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "invoice_number",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "invoice_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": "CURRENT_DATE"
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'posted'::text"
      },
      {
        "name": "payment_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_path",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "description",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_by",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "invoices_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "invoices_contractor_id_fkey",
        "definition": "FOREIGN KEY (contractor_id) REFERENCES contractors(id)"
      },
      {
        "name": "invoices_document_id_fkey",
        "definition": "FOREIGN KEY (document_id) REFERENCES building_documents(id) ON DELETE CASCADE"
      },
      {
        "name": "invoices_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "invoices_unit_id_fkey",
        "definition": "FOREIGN KEY (unit_id) REFERENCES units(id) ON DELETE CASCADE"
      },
      {
        "name": "invoices_works_order_id_fkey",
        "definition": "FOREIGN KEY (works_order_id) REFERENCES works_orders(id) ON DELETE SET NULL"
      }
    ],
    "indexes": [
      {
        "name": "invoices_pkey",
        "definition": "CREATE UNIQUE INDEX invoices_pkey ON public.invoices USING btree (id)"
      },
      {
        "name": "idx_invoices_building",
        "definition": "CREATE INDEX idx_invoices_building ON public.invoices USING btree (building_id)"
      },
      {
        "name": "idx_invoices_work_order",
        "definition": "CREATE INDEX idx_invoices_work_order ON public.invoices USING btree (works_order_id)"
      },
      {
        "name": "idx_invoices_contractor",
        "definition": "CREATE INDEX idx_invoices_contractor ON public.invoices USING btree (contractor_id)"
      },
      {
        "name": "idx_invoices_status",
        "definition": "CREATE INDEX idx_invoices_status ON public.invoices USING btree (status)"
      },
      {
        "name": "idx_invoices_date",
        "definition": "CREATE INDEX idx_invoices_date ON public.invoices USING btree (invoice_date DESC)"
      }
    ]
  },
  "lead_chat_sessions": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "title",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": "'New Chat'::text"
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "building_id",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "user_id",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "chat_sessions_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "chat_sessions_pkey",
        "definition": "CREATE UNIQUE INDEX chat_sessions_pkey ON public.lead_chat_sessions USING btree (id)"
      },
      {
        "name": "idx_chat_sessions_created_at",
        "definition": "CREATE INDEX idx_chat_sessions_created_at ON public.lead_chat_sessions USING btree (created_at DESC)"
      },
      {
        "name": "idx_chat_sessions_building_id",
        "definition": "CREATE INDEX idx_chat_sessions_building_id ON public.lead_chat_sessions USING btree (building_id)"
      },
      {
        "name": "idx_chat_sessions_user_id",
        "definition": "CREATE INDEX idx_chat_sessions_user_id ON public.lead_chat_sessions USING btree (user_id)"
      }
    ]
  },
  "lease_variations": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "lease_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "variation_type",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "lease_variations_document_id_fkey",
        "definition": "FOREIGN KEY (document_id) REFERENCES building_documents(id) ON DELETE CASCADE"
      },
      {
        "name": "lease_variations_lease_id_fkey",
        "definition": "FOREIGN KEY (lease_id) REFERENCES leases(id) ON DELETE CASCADE"
      },
      {
        "name": "lease_variations_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "lease_variations_pkey",
        "definition": "CREATE UNIQUE INDEX lease_variations_pkey ON public.lease_variations USING btree (id)"
      }
    ]
  },
  "leaseholders": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "unit_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "name",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "email",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "correspondence_address",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "confidence_score",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": "1.00"
      },
      {
        "name": "unit_number",
        "type": "character varying",
        "max_length": 50,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "fk_leaseholders_building",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id)"
      },
      {
        "name": "leaseholders_confidence_score_check",
        "definition": "CHECK (((confidence_score >= (0)::numeric) AND (confidence_score <= (1)::numeric)))"
      },
      {
        "name": "leaseholders_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "leaseholders_unit_id_fkey",
        "definition": "FOREIGN KEY (unit_id) REFERENCES units(id) ON DELETE CASCADE"
      }
    ],
    "indexes": [
      {
        "name": "leaseholders_pkey",
        "definition": "CREATE UNIQUE INDEX leaseholders_pkey ON public.leaseholders USING btree (id)"
      },
      {
        "name": "idx_leaseholders_building_id",
        "definition": "CREATE INDEX idx_leaseholders_building_id ON public.leaseholders USING btree (building_id)"
      },
      {
        "name": "idx_leaseholders_building",
        "definition": "CREATE INDEX idx_leaseholders_building ON public.leaseholders USING btree (building_id)"
      },
      {
        "name": "idx_leaseholders_unit",
        "definition": "CREATE INDEX idx_leaseholders_unit ON public.leaseholders USING btree (unit_id)"
      }
    ]
  },
  "leases": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "unit_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "leaseholder_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "lease_type",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "start_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "end_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "confidence_score",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": "1.00"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "expiry_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "leases_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "leases_confidence_score_check",
        "definition": "CHECK (((confidence_score >= (0)::numeric) AND (confidence_score <= (1)::numeric)))"
      },
      {
        "name": "leases_document_id_fkey",
        "definition": "FOREIGN KEY (document_id) REFERENCES building_documents(id) ON DELETE CASCADE"
      },
      {
        "name": "leases_leaseholder_id_fkey",
        "definition": "FOREIGN KEY (leaseholder_id) REFERENCES leaseholders(id) ON DELETE CASCADE"
      },
      {
        "name": "leases_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "leases_unit_id_fkey",
        "definition": "FOREIGN KEY (unit_id) REFERENCES units(id) ON DELETE CASCADE"
      }
    ],
    "indexes": [
      {
        "name": "leases_pkey",
        "definition": "CREATE UNIQUE INDEX leases_pkey ON public.leases USING btree (id)"
      },
      {
        "name": "idx_leases_building",
        "definition": "CREATE INDEX idx_leases_building ON public.leases USING btree (building_id)"
      },
      {
        "name": "idx_leases_expiry",
        "definition": "CREATE INDEX idx_leases_expiry ON public.leases USING btree (expiry_date)"
      },
      {
        "name": "idx_leases_unit",
        "definition": "CREATE INDEX idx_leases_unit ON public.leases USING btree (unit_id)"
      }
    ]
  },
  "major_works": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "project_name",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "budget",
        "type": "numeric",
        "max_length": null,
        "nullable": false,
        "default": "0"
      },
      {
        "name": "spent",
        "type": "numeric",
        "max_length": null,
        "nullable": false,
        "default": "0"
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": "'planned'::text"
      },
      {
        "name": "start_date",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "completion_date",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "description",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "major_works_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "major_works_status_check",
        "definition": "CHECK ((status = ANY (ARRAY['planned'::text, 'in_progress'::text, 'completed'::text, 'on_hold'::text])))"
      }
    ],
    "indexes": [
      {
        "name": "major_works_pkey",
        "definition": "CREATE UNIQUE INDEX major_works_pkey ON public.major_works USING btree (id)"
      },
      {
        "name": "idx_major_works_building_id",
        "definition": "CREATE INDEX idx_major_works_building_id ON public.major_works USING btree (building_id)"
      },
      {
        "name": "idx_major_works_status",
        "definition": "CREATE INDEX idx_major_works_status ON public.major_works USING btree (status)"
      }
    ]
  },
  "major_works_notices": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "project_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "notice_type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "issued_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "fk_major_works_notices_building",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id)"
      },
      {
        "name": "major_works_notices_document_id_fkey",
        "definition": "FOREIGN KEY (document_id) REFERENCES building_documents(id) ON DELETE CASCADE"
      },
      {
        "name": "major_works_notices_notice_type_check",
        "definition": "CHECK ((notice_type = ANY (ARRAY['NOI'::text, 'SOE'::text, 'Final'::text, 'Other'::text])))"
      },
      {
        "name": "major_works_notices_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "major_works_notices_project_id_fkey",
        "definition": "FOREIGN KEY (project_id) REFERENCES major_works_projects(id) ON DELETE CASCADE"
      }
    ],
    "indexes": [
      {
        "name": "major_works_notices_pkey",
        "definition": "CREATE UNIQUE INDEX major_works_notices_pkey ON public.major_works_notices USING btree (id)"
      },
      {
        "name": "idx_major_works_notices_building_id",
        "definition": "CREATE INDEX idx_major_works_notices_building_id ON public.major_works_notices USING btree (building_id)"
      }
    ]
  },
  "major_works_projects": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "project_name",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "start_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "end_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "major_works_projects_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "major_works_projects_document_id_fkey",
        "definition": "FOREIGN KEY (document_id) REFERENCES building_documents(id) ON DELETE CASCADE"
      },
      {
        "name": "major_works_projects_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "major_works_projects_status_check",
        "definition": "CHECK ((status = ANY (ARRAY['planned'::text, 'in_progress'::text, 'completed'::text, 'cancelled'::text])))"
      }
    ],
    "indexes": [
      {
        "name": "major_works_projects_pkey",
        "definition": "CREATE UNIQUE INDEX major_works_projects_pkey ON public.major_works_projects USING btree (id)"
      }
    ]
  },
  "management_pack_audit": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "pack_type",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'lpe1'::text"
      },
      {
        "name": "generated_by",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "generated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "included",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "missing",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_count",
        "type": "integer",
        "max_length": null,
        "nullable": true,
        "default": "0"
      },
      {
        "name": "total_size_mb",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "download_url",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'completed'::text"
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "management_pack_audit_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "management_pack_audit_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "management_pack_audit_pkey",
        "definition": "CREATE UNIQUE INDEX management_pack_audit_pkey ON public.management_pack_audit USING btree (id)"
      },
      {
        "name": "idx_management_pack_audit_building",
        "definition": "CREATE INDEX idx_management_pack_audit_building ON public.management_pack_audit USING btree (building_id)"
      },
      {
        "name": "idx_management_pack_audit_date",
        "definition": "CREATE INDEX idx_management_pack_audit_date ON public.management_pack_audit USING btree (generated_at DESC)"
      }
    ]
  },
  "meeting_transcripts": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "meeting_type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "meeting_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "transcript",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "confidence_score",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "audio_file_path",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "minutes_word_path",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "minutes_pdf_path",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "attendees",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "speaker_diarization",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "metadata",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_by",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "meeting_transcripts_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "meeting_transcripts_created_by_fkey",
        "definition": "FOREIGN KEY (created_by) REFERENCES auth.users(id) ON DELETE SET NULL"
      },
      {
        "name": "meeting_transcripts_meeting_type_check",
        "definition": "CHECK ((meeting_type = ANY (ARRAY['AGM'::text, 'EGM'::text, 'Directors'::text, 'Committee'::text, 'Section20Consultation'::text, 'Other'::text])))"
      },
      {
        "name": "meeting_transcripts_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "meeting_transcripts_pkey",
        "definition": "CREATE UNIQUE INDEX meeting_transcripts_pkey ON public.meeting_transcripts USING btree (id)"
      },
      {
        "name": "idx_meeting_transcripts_building_id",
        "definition": "CREATE INDEX idx_meeting_transcripts_building_id ON public.meeting_transcripts USING btree (building_id)"
      },
      {
        "name": "idx_meeting_transcripts_meeting_type",
        "definition": "CREATE INDEX idx_meeting_transcripts_meeting_type ON public.meeting_transcripts USING btree (meeting_type)"
      },
      {
        "name": "idx_meeting_transcripts_meeting_date",
        "definition": "CREATE INDEX idx_meeting_transcripts_meeting_date ON public.meeting_transcripts USING btree (meeting_date)"
      },
      {
        "name": "idx_meeting_transcripts_created_at",
        "definition": "CREATE INDEX idx_meeting_transcripts_created_at ON public.meeting_transcripts USING btree (created_at)"
      }
    ]
  },
  "portfolios": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "agency_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "name",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "portfolios_agency_id_fkey",
        "definition": "FOREIGN KEY (agency_id) REFERENCES agencies(id) ON DELETE CASCADE"
      },
      {
        "name": "portfolios_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "portfolios_pkey",
        "definition": "CREATE UNIQUE INDEX portfolios_pkey ON public.portfolios USING btree (id)"
      }
    ]
  },
  "profiles": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "agency_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "role",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": "'user'::text"
      },
      {
        "name": "full_name",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "email",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "profiles_agency_id_fkey",
        "definition": "FOREIGN KEY (agency_id) REFERENCES agencies(id) ON DELETE CASCADE"
      },
      {
        "name": "profiles_id_fkey",
        "definition": "FOREIGN KEY (id) REFERENCES auth.users(id) ON DELETE CASCADE"
      },
      {
        "name": "profiles_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "profiles_pkey",
        "definition": "CREATE UNIQUE INDEX profiles_pkey ON public.profiles USING btree (id)"
      },
      {
        "name": "idx_profiles_agency_id",
        "definition": "CREATE INDEX idx_profiles_agency_id ON public.profiles USING btree (agency_id)"
      }
    ]
  },
  "retender_events": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "contractor_contract_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "event_type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "event_date",
        "type": "date",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "reminder_days_before",
        "type": "integer",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "is_actioned",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "false"
      },
      {
        "name": "actioned_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "actioned_by",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "retender_session_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "retender_events_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "retender_events_contractor_contract_id_fkey",
        "definition": "FOREIGN KEY (contractor_contract_id) REFERENCES contractor_contracts(id) ON DELETE CASCADE"
      },
      {
        "name": "retender_events_event_type_check",
        "definition": "CHECK ((event_type = ANY (ARRAY['expiry_reminder'::text, 'review_due'::text, 'retender_required'::text])))"
      },
      {
        "name": "retender_events_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "retender_events_retender_session_id_fkey",
        "definition": "FOREIGN KEY (retender_session_id) REFERENCES retender_sessions(id)"
      }
    ],
    "indexes": [
      {
        "name": "retender_events_pkey",
        "definition": "CREATE UNIQUE INDEX retender_events_pkey ON public.retender_events USING btree (id)"
      },
      {
        "name": "idx_retender_events_building",
        "definition": "CREATE INDEX idx_retender_events_building ON public.retender_events USING btree (building_id)"
      },
      {
        "name": "idx_retender_events_contract",
        "definition": "CREATE INDEX idx_retender_events_contract ON public.retender_events USING btree (contractor_contract_id)"
      },
      {
        "name": "idx_retender_events_date",
        "definition": "CREATE INDEX idx_retender_events_date ON public.retender_events USING btree (event_date)"
      },
      {
        "name": "idx_retender_events_actioned",
        "definition": "CREATE INDEX idx_retender_events_actioned ON public.retender_events USING btree (is_actioned)"
      }
    ]
  },
  "retender_quotes": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "retender_session_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "contractor_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "contractor_name",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "quoted_amount",
        "type": "numeric",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "contract_term_years",
        "type": "integer",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "payment_terms",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "is_selected",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "false"
      },
      {
        "name": "evaluation_score",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "evaluation_notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "quote_document_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "received_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "valid_until",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "metadata",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": "'{}'::jsonb"
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "retender_quotes_contractor_id_fkey",
        "definition": "FOREIGN KEY (contractor_id) REFERENCES contractors(id)"
      },
      {
        "name": "retender_quotes_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "retender_quotes_quote_document_id_fkey",
        "definition": "FOREIGN KEY (quote_document_id) REFERENCES building_documents(id)"
      },
      {
        "name": "retender_quotes_retender_session_id_fkey",
        "definition": "FOREIGN KEY (retender_session_id) REFERENCES retender_sessions(id) ON DELETE CASCADE"
      }
    ],
    "indexes": [
      {
        "name": "retender_quotes_pkey",
        "definition": "CREATE UNIQUE INDEX retender_quotes_pkey ON public.retender_quotes USING btree (id)"
      },
      {
        "name": "idx_retender_quotes_session",
        "definition": "CREATE INDEX idx_retender_quotes_session ON public.retender_quotes USING btree (retender_session_id)"
      },
      {
        "name": "idx_retender_quotes_contractor",
        "definition": "CREATE INDEX idx_retender_quotes_contractor ON public.retender_quotes USING btree (contractor_id)"
      },
      {
        "name": "idx_retender_quotes_selected",
        "definition": "CREATE INDEX idx_retender_quotes_selected ON public.retender_quotes USING btree (is_selected) WHERE (is_selected = true)"
      }
    ]
  },
  "retender_sessions": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "contractor_contract_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "service_category",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "initiated_by",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'in_progress'::text"
      },
      {
        "name": "started_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "deadline_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "completed_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "winning_quote_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "comparison_pdf",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "metadata",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": "'{}'::jsonb"
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "retender_sessions_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "retender_sessions_contractor_contract_id_fkey",
        "definition": "FOREIGN KEY (contractor_contract_id) REFERENCES contractor_contracts(id) ON DELETE CASCADE"
      },
      {
        "name": "retender_sessions_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "retender_sessions_status_check",
        "definition": "CHECK ((status = ANY (ARRAY['in_progress'::text, 'quotes_received'::text, 'reviewed'::text, 'completed'::text, 'cancelled'::text])))"
      }
    ],
    "indexes": [
      {
        "name": "idx_retender_sessions_status",
        "definition": "CREATE INDEX idx_retender_sessions_status ON public.retender_sessions USING btree (status)"
      },
      {
        "name": "retender_sessions_pkey",
        "definition": "CREATE UNIQUE INDEX retender_sessions_pkey ON public.retender_sessions USING btree (id)"
      },
      {
        "name": "idx_retender_sessions_building",
        "definition": "CREATE INDEX idx_retender_sessions_building ON public.retender_sessions USING btree (building_id)"
      },
      {
        "name": "idx_retender_sessions_contract",
        "definition": "CREATE INDEX idx_retender_sessions_contract ON public.retender_sessions USING btree (contractor_contract_id)"
      }
    ]
  },
  "roles": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "role_name",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "roles_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "roles_pkey",
        "definition": "CREATE UNIQUE INDEX roles_pkey ON public.roles USING btree (id)"
      }
    ]
  },
  "safety_case_documents": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_type",
        "type": "USER-DEFINED",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "status",
        "type": "USER-DEFINED",
        "max_length": null,
        "nullable": true,
        "default": "'missing'::document_status"
      },
      {
        "name": "received_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "expected_upload_date",
        "type": "date",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "file_url",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "source",
        "type": "USER-DEFINED",
        "max_length": null,
        "nullable": true,
        "default": "'upload'::source_type"
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "confidence_score",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": "1.00"
      },
      {
        "name": "created_at",
        "type": "timestamp without time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp without time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "safety_case_documents_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "safety_case_documents_confidence_score_check",
        "definition": "CHECK (((confidence_score >= (0)::numeric) AND (confidence_score <= (1)::numeric)))"
      },
      {
        "name": "safety_case_documents_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "safety_case_documents_pkey",
        "definition": "CREATE UNIQUE INDEX safety_case_documents_pkey ON public.safety_case_documents USING btree (id)"
      },
      {
        "name": "idx_safety_docs_building_status",
        "definition": "CREATE INDEX idx_safety_docs_building_status ON public.safety_case_documents USING btree (building_id, status)"
      },
      {
        "name": "idx_safety_docs_type",
        "definition": "CREATE INDEX idx_safety_docs_type ON public.safety_case_documents USING btree (document_type)"
      },
      {
        "name": "idx_safety_docs_received",
        "definition": "CREATE INDEX idx_safety_docs_received ON public.safety_case_documents USING btree (received_date)"
      }
    ]
  },
  "schedules": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "name",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "description",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "agency_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "schedules_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "schedules_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "schedules_pkey",
        "definition": "CREATE UNIQUE INDEX schedules_pkey ON public.schedules USING btree (id)"
      },
      {
        "name": "idx_schedules_building_id",
        "definition": "CREATE INDEX idx_schedules_building_id ON public.schedules USING btree (building_id)"
      }
    ]
  },
  "tenders": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "budget_line_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "schedule_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "vendor_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "type",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'sent'::text"
      },
      {
        "name": "amount",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "document_url",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "sent_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "responded_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "approved_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "agency_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "tenders_budget_line_id_fkey",
        "definition": "FOREIGN KEY (budget_line_id) REFERENCES budget_lines(id) ON DELETE CASCADE"
      },
      {
        "name": "tenders_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id)"
      },
      {
        "name": "tenders_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "tenders_schedule_id_fkey",
        "definition": "FOREIGN KEY (schedule_id) REFERENCES schedules(id)"
      },
      {
        "name": "tenders_vendor_id_fkey",
        "definition": "FOREIGN KEY (vendor_id) REFERENCES vendors(id)"
      }
    ],
    "indexes": [
      {
        "name": "tenders_pkey",
        "definition": "CREATE UNIQUE INDEX tenders_pkey ON public.tenders USING btree (id)"
      },
      {
        "name": "idx_tenders_budget_line_id",
        "definition": "CREATE INDEX idx_tenders_budget_line_id ON public.tenders USING btree (budget_line_id)"
      },
      {
        "name": "idx_tenders_building_id",
        "definition": "CREATE INDEX idx_tenders_building_id ON public.tenders USING btree (building_id)"
      },
      {
        "name": "idx_tenders_schedule_id",
        "definition": "CREATE INDEX idx_tenders_schedule_id ON public.tenders USING btree (schedule_id)"
      },
      {
        "name": "idx_tenders_vendor_id",
        "definition": "CREATE INDEX idx_tenders_vendor_id ON public.tenders USING btree (vendor_id)"
      }
    ]
  },
  "timeline_events": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "event_type",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "event_date",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "description",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "metadata",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "severity",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'info'::text"
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "timeline_events_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id)"
      },
      {
        "name": "timeline_events_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "timeline_events_severity_check",
        "definition": "CHECK ((severity = ANY (ARRAY['info'::text, 'warning'::text, 'error'::text])))"
      }
    ],
    "indexes": [
      {
        "name": "timeline_events_pkey",
        "definition": "CREATE UNIQUE INDEX timeline_events_pkey ON public.timeline_events USING btree (id)"
      },
      {
        "name": "idx_timeline_events_building",
        "definition": "CREATE INDEX idx_timeline_events_building ON public.timeline_events USING btree (building_id)"
      },
      {
        "name": "idx_timeline_events_type",
        "definition": "CREATE INDEX idx_timeline_events_type ON public.timeline_events USING btree (event_type)"
      },
      {
        "name": "idx_timeline_events_date",
        "definition": "CREATE INDEX idx_timeline_events_date ON public.timeline_events USING btree (event_date)"
      }
    ]
  },
  "units": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "unit_number",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "units_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "units_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "units_pkey",
        "definition": "CREATE UNIQUE INDEX units_pkey ON public.units USING btree (id)"
      }
    ]
  },
  "user_buildings": {
    "columns": [
      {
        "name": "user_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "assigned_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "user_buildings_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "user_buildings_pkey",
        "definition": "PRIMARY KEY (user_id, building_id)"
      },
      {
        "name": "user_buildings_user_id_fkey",
        "definition": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE"
      }
    ],
    "indexes": [
      {
        "name": "user_buildings_pkey",
        "definition": "CREATE UNIQUE INDEX user_buildings_pkey ON public.user_buildings USING btree (user_id, building_id)"
      }
    ]
  },
  "user_calendar_events": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "user_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "event_id",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "subject",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "start_time",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "end_time",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "location",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "organizer_email",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "organizer_name",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "attendees",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": "'[]'::jsonb"
      },
      {
        "name": "body_preview",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "is_all_day",
        "type": "boolean",
        "max_length": null,
        "nullable": true,
        "default": "false"
      },
      {
        "name": "category",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "related_building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "metadata",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": "'{}'::jsonb"
      },
      {
        "name": "synced_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      }
    ],
    "constraints": [
      {
        "name": "user_calendar_events_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "user_calendar_events_related_building_id_fkey",
        "definition": "FOREIGN KEY (related_building_id) REFERENCES buildings(id) ON DELETE SET NULL"
      },
      {
        "name": "user_calendar_events_user_id_fkey",
        "definition": "FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE CASCADE"
      }
    ],
    "indexes": [
      {
        "name": "user_calendar_events_pkey",
        "definition": "CREATE UNIQUE INDEX user_calendar_events_pkey ON public.user_calendar_events USING btree (id)"
      },
      {
        "name": "idx_user_calendar_events_user_id",
        "definition": "CREATE INDEX idx_user_calendar_events_user_id ON public.user_calendar_events USING btree (user_id)"
      },
      {
        "name": "idx_user_calendar_events_start_time",
        "definition": "CREATE INDEX idx_user_calendar_events_start_time ON public.user_calendar_events USING btree (start_time)"
      },
      {
        "name": "idx_user_calendar_events_category",
        "definition": "CREATE INDEX idx_user_calendar_events_category ON public.user_calendar_events USING btree (category)"
      },
      {
        "name": "idx_user_calendar_events_event_id",
        "definition": "CREATE INDEX idx_user_calendar_events_event_id ON public.user_calendar_events USING btree (event_id)"
      },
      {
        "name": "idx_user_calendar_events_user_event",
        "definition": "CREATE UNIQUE INDEX idx_user_calendar_events_user_event ON public.user_calendar_events USING btree (user_id, event_id)"
      }
    ]
  },
  "user_roles": {
    "columns": [
      {
        "name": "user_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "role_id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "user_roles_pkey",
        "definition": "PRIMARY KEY (user_id, role_id)"
      },
      {
        "name": "user_roles_role_id_fkey",
        "definition": "FOREIGN KEY (role_id) REFERENCES roles(id) ON DELETE CASCADE"
      },
      {
        "name": "user_roles_user_id_fkey",
        "definition": "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE"
      }
    ],
    "indexes": [
      {
        "name": "user_roles_pkey",
        "definition": "CREATE UNIQUE INDEX user_roles_pkey ON public.user_roles USING btree (user_id, role_id)"
      }
    ]
  },
  "users": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "uuid_generate_v4()"
      },
      {
        "name": "agency_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "email",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "name",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "auth_user_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "users_agency_id_fkey",
        "definition": "FOREIGN KEY (agency_id) REFERENCES agencies(id) ON DELETE CASCADE"
      },
      {
        "name": "users_auth_user_id_fkey",
        "definition": "FOREIGN KEY (auth_user_id) REFERENCES auth.users(id)"
      },
      {
        "name": "users_email_key",
        "definition": "UNIQUE (email)"
      },
      {
        "name": "users_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "users_pkey",
        "definition": "CREATE UNIQUE INDEX users_pkey ON public.users USING btree (id)"
      },
      {
        "name": "users_email_key",
        "definition": "CREATE UNIQUE INDEX users_email_key ON public.users USING btree (email)"
      }
    ]
  },
  "vendors": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "name",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "contact_name",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "email",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "phone",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "address",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "agency_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "vendors_pkey",
        "definition": "PRIMARY KEY (id)"
      }
    ],
    "indexes": [
      {
        "name": "vendors_pkey",
        "definition": "CREATE UNIQUE INDEX vendors_pkey ON public.vendors USING btree (id)"
      }
    ]
  },
  "works_orders": {
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "max_length": null,
        "nullable": false,
        "default": "gen_random_uuid()"
      },
      {
        "name": "building_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "contractor_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "contractor_contract_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "compliance_asset_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "title",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "summary",
        "type": "text",
        "max_length": null,
        "nullable": false,
        "default": null
      },
      {
        "name": "description",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "service_category",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "priority",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'medium'::text"
      },
      {
        "name": "cost_estimate",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "actual_cost",
        "type": "numeric",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "invoice_number",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "status",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": "'open'::text"
      },
      {
        "name": "reported_date",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "assigned_date",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "completed_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "reported_by",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "unit_number",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "notes",
        "type": "text",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "metadata",
        "type": "jsonb",
        "max_length": null,
        "nullable": true,
        "default": "'{}'::jsonb"
      },
      {
        "name": "created_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "updated_at",
        "type": "timestamp with time zone",
        "max_length": null,
        "nullable": true,
        "default": "now()"
      },
      {
        "name": "agency_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      },
      {
        "name": "schedule_id",
        "type": "uuid",
        "max_length": null,
        "nullable": true,
        "default": null
      }
    ],
    "constraints": [
      {
        "name": "works_orders_building_id_fkey",
        "definition": "FOREIGN KEY (building_id) REFERENCES buildings(id) ON DELETE CASCADE"
      },
      {
        "name": "works_orders_compliance_asset_id_fkey",
        "definition": "FOREIGN KEY (compliance_asset_id) REFERENCES compliance_assets(id) ON DELETE SET NULL"
      },
      {
        "name": "works_orders_contractor_contract_id_fkey",
        "definition": "FOREIGN KEY (contractor_contract_id) REFERENCES contractor_contracts(id) ON DELETE SET NULL"
      },
      {
        "name": "works_orders_contractor_id_fkey",
        "definition": "FOREIGN KEY (contractor_id) REFERENCES contractors(id) ON DELETE SET NULL"
      },
      {
        "name": "works_orders_pkey",
        "definition": "PRIMARY KEY (id)"
      },
      {
        "name": "works_orders_priority_check",
        "definition": "CHECK ((priority = ANY (ARRAY['low'::text, 'medium'::text, 'high'::text, 'urgent'::text])))"
      },
      {
        "name": "works_orders_schedule_id_fkey",
        "definition": "FOREIGN KEY (schedule_id) REFERENCES schedules(id)"
      },
      {
        "name": "works_orders_status_check",
        "definition": "CHECK ((status = ANY (ARRAY['open'::text, 'assigned'::text, 'in_progress'::text, 'awaiting_invoice'::text, 'complete'::text, 'cancelled'::text])))"
      }
    ],
    "indexes": [
      {
        "name": "works_orders_pkey",
        "definition": "CREATE UNIQUE INDEX works_orders_pkey ON public.works_orders USING btree (id)"
      },
      {
        "name": "idx_works_orders_building",
        "definition": "CREATE INDEX idx_works_orders_building ON public.works_orders USING btree (building_id)"
      },
      {
        "name": "idx_works_orders_contractor",
        "definition": "CREATE INDEX idx_works_orders_contractor ON public.works_orders USING btree (contractor_id)"
      },
      {
        "name": "idx_works_orders_contract",
        "definition": "CREATE INDEX idx_works_orders_contract ON public.works_orders USING btree (contractor_contract_id)"
      },
      {
        "name": "idx_works_orders_status",
        "definition": "CREATE INDEX idx_works_orders_status ON public.works_orders USING btree (status)"
      },
      {
        "name": "idx_works_orders_service",
        "definition": "CREATE INDEX idx_works_orders_service ON public.works_orders USING btree (service_category)"
      },
      {
        "name": "idx_works_orders_compliance",
        "definition": "CREATE INDEX idx_works_orders_compliance ON public.works_orders USING btree (compliance_asset_id)"
      },
      {
        "name": "idx_works_orders_schedule_id",
        "definition": "CREATE INDEX idx_works_orders_schedule_id ON public.works_orders USING btree (schedule_id)"
      },
      {
        "name": "idx_works_orders_building_schedule",
        "definition": "CREATE INDEX idx_works_orders_building_schedule ON public.works_orders USING btree (building_id, schedule_id)"
      }
    ]
  }
}